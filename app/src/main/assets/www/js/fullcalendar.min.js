!function(e){"function"==typeof define&&define.amd?define(["jquery","moment"],e):"object"==typeof exports?module.exports=e(require("jquery"),require("moment")):e(jQuery,moment)}(function(e,t){function s(e){return he(e,r)}function a(e,t){t.left&&e.css({"border-left-width":1,"margin-left":t.left-1}),t.right&&e.css({"border-right-width":1,"margin-right":t.right-1})}function o(e){e.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function l(){e("body").addClass("fc-not-allowed")}function u(){e("body").removeClass("fc-not-allowed")}function h(t,n,i){var r=Math.floor(n/t.length),s=Math.floor(n-r*(t.length-1)),a=[],o=[],l=[],u=0;c(t),t.each(function(n,i){var h=n===t.length-1?s:r,c=e(i).outerHeight(!0);h>c?(a.push(i),o.push(c),l.push(e(i).height())):u+=c}),i&&(n-=u,r=Math.floor(n/a.length),s=Math.floor(n-r*(a.length-1))),e(a).each(function(t,n){var i=t===a.length-1?s:r,u=o[t],h=l[t],c=i-(u-h);i>u&&e(n).height(c)})}function c(e){e.height("")}function d(t){var n=0;return t.find("> *").each(function(t,i){var r=e(i).outerWidth();r>n&&(n=r)}),n++,t.width(n),n}function f(e,t){var i,n=e.add(t);return n.css({position:"relative",left:-1}),i=e.outerHeight()-t.outerHeight(),n.css({position:"",left:""}),i}function v(t){var n=t.css("position"),i=t.parents().filter(function(){var t=e(this);return/(auto|scroll)/.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&i.length?i:e(t[0].ownerDocument||document)}function g(e,t){var n=e.offset(),i=n.left-(t?t.left:0),r=n.top-(t?t.top:0);return{left:i,right:i+e.outerWidth(),top:r,bottom:r+e.outerHeight()}}function p(e,t){var n=e.offset(),i=y(e),r=n.left+D(e,"border-left-width")+i.left-(t?t.left:0),s=n.top+D(e,"border-top-width")+i.top-(t?t.top:0);return{left:r,right:r+e[0].clientWidth,top:s,bottom:s+e[0].clientHeight}}function m(e,t){var n=e.offset(),i=n.left+D(e,"border-left-width")+D(e,"padding-left")-(t?t.left:0),r=n.top+D(e,"border-top-width")+D(e,"padding-top")-(t?t.top:0);return{left:i,right:i+e.width(),top:r,bottom:r+e.height()}}function y(e){var i,t=e[0].offsetWidth-e[0].clientWidth,n=e[0].offsetHeight-e[0].clientHeight;return t=w(t),n=w(n),i={left:0,right:0,top:0,bottom:n},b()&&"rtl"==e.css("direction")?i.left=t:i.right=t,i}function w(e){return e=Math.max(0,e),e=Math.round(e)}function b(){return null===S&&(S=E()),S}function E(){var t=e("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body"),n=t.children(),i=n.offset().left>t.offset().left;return t.remove(),i}function D(e,t){return parseFloat(e.css(t))||0}function T(e){return 1==e.which&&!e.ctrlKey}function C(e){var t=e.originalEvent.touches;return t&&t.length?t[0].pageX:e.pageX}function H(e){var t=e.originalEvent.touches;return t&&t.length?t[0].pageY:e.pageY}function R(e){return/^touch/.test(e.type)}function x(e){e.addClass("fc-unselectable").on("selectstart",k)}function I(e){e.removeClass("fc-unselectable").off("selectstart",k)}function k(e){e.preventDefault()}function M(e,t){var n={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)};return n.left<n.right&&n.top<n.bottom?n:!1}function B(e,t){return{left:Math.min(Math.max(e.left,t.left),t.right),top:Math.min(Math.max(e.top,t.top),t.bottom)}}function L(e){return{left:(e.left+e.right)/2,top:(e.top+e.bottom)/2}}function N(e,t){return{left:e.left-t.left,top:e.top-t.top}}function z(t){var r,s,n=[],i=[];for("string"==typeof t?i=t.split(/\s*,\s*/):"function"==typeof t?i=[t]:e.isArray(t)&&(i=t),r=0;r<i.length;r++)s=i[r],"string"==typeof s?n.push("-"==s.charAt(0)?{field:s.substring(1),order:-1}:{field:s,order:1}):"function"==typeof s&&n.push({func:s});return n}function F(e,t,n){var i,r;for(i=0;i<n.length;i++)if(r=A(e,t,n[i]))return r;return 0}function A(e,t,n){return n.func?n.func(e,t):V(e[n.field],t[n.field])*(n.order||1)}function V(t,n){return t||n?null==n?-1:null==t?1:"string"===e.type(t)||"string"===e.type(n)?String(t).localeCompare(String(n)):t-n:0}function G(e,t){var a,o,l,u,n=e.start,i=e.end,r=t.start,s=t.end;return i>r&&s>n?(n>=r?(a=n.clone(),l=!0):(a=r.clone(),l=!1),s>=i?(o=i.clone(),u=!0):(o=s.clone(),u=!1),{start:a,end:o,isStart:l,isEnd:u}):void 0}function _(e,n){return t.duration({days:e.clone().stripTime().diff(n.clone().stripTime(),"days"),ms:e.time()-n.time()})}function W(e,n){return t.duration({days:e.clone().stripTime().diff(n.clone().stripTime(),"days")})}function Y(e,n,i){return t.duration(Math.round(e.diff(n,i,!0)),i)}function q(e,t){var n,i,r;for(n=0;n<P.length&&(i=P[n],r=j(i,e,t),!(r>=1&&De(r)));n++);return i}function U(e,t){var n=q(e);return"week"===n&&"object"==typeof t&&t.days&&(n="day"),n}function j(e,n,i){return null!=i?i.diff(n,e,!0):t.isDuration(n)?n.as(e):n.end.diff(n.start,e,!0)}function Z(e,t,n){var i;return ae(n)?(t-e)/n:(i=n.asMonths(),Math.abs(i)>=1&&De(i)?t.diff(e,"months",!0)/i:t.diff(e,"days",!0)/n.asDays())}function $(e,t){var n,i;return ae(e)||ae(t)?e/t:(n=e.asMonths(),i=t.asMonths(),Math.abs(n)>=1&&De(n)&&Math.abs(i)>=1&&De(i)?n/i:e.asDays()/t.asDays())}function Q(e,n){var i;return ae(e)?t.duration(e*n):(i=e.asMonths(),Math.abs(i)>=1&&De(i)?t.duration({months:i*n}):t.duration({days:e.asDays()*n}))}function X(e){return{start:e.start.clone(),end:e.end.clone()}}function K(e,t){return e=X(e),t.start&&(e.start=J(e.start,t)),t.end&&(e.end=re(e.end,t.end)),e}function J(e,t){return e=e.clone(),t.start&&(e=se(e,t.start)),t.end&&e>=t.end&&(e=t.end.clone().subtract(1)),e}function ee(e,t){return(!t.start||e>=t.start)&&(!t.end||e<t.end)}function te(e,t){return(!t.start||e.end>=t.start)&&(!t.end||e.start<t.end)}function ne(e,t){return(!t.start||e.start>=t.start)&&(!t.end||e.end<=t.end)}function ie(e,t){return(e.start&&t.start&&e.start.isSame(t.start)||!e.start&&!t.start)&&(e.end&&t.end&&e.end.isSame(t.end)||!e.end&&!t.end)}function re(e,t){return(e.isBefore(t)?e:t).clone()}function se(e,t){return(e.isAfter(t)?e:t).clone()}function ae(e){return Boolean(e.hours()||e.minutes()||e.seconds()||e.milliseconds())}function oe(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function le(e){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(e)}function he(e,t){var i,r,s,a,o,l,n={};if(t)for(i=0;i<t.length;i++){for(r=t[i],s=[],a=e.length-1;a>=0;a--)if(o=e[a][r],"object"==typeof o)s.unshift(o);else if(void 0!==o){n[r]=o;break}s.length&&(n[r]=he(s))}for(i=e.length-1;i>=0;i--){l=e[i];for(r in l)r in n||(n[r]=l[r])}return n}function ce(e){var t=function(){};return t.prototype=e,new t}function de(e,t){for(var n in e)fe(e,n)&&(t[n]=e[n])}function fe(e,t){return ue.call(e,t)}function ve(t){return/undefined|null|boolean|number|string/.test(e.type(t))}function ge(t,n,i){if(e.isFunction(t)&&(t=[t]),t){var r,s;for(r=0;r<t.length;r++)s=t[r].apply(n,i)||s;return s}}function pe(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]}function me(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function ye(e){return e.replace(/&.*?;/g,"")}function we(t){var n=[];return e.each(t,function(e,t){null!=t&&n.push(e+":"+t)}),n.join(";")}function Se(t){var n=[];return e.each(t,function(e,t){null!=t&&n.push(e+'="'+me(t)+'"')}),n.join(" ")}function be(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Ee(e,t){return e-t}function De(e){return e%1===0}function Te(e,t){var n=e[t];return function(){return n.apply(e,arguments)}}function Ce(e,t,n){var i,r,s,a,o,l=function(){var u=+new Date-a;t>u?i=setTimeout(l,t-u):(i=null,n||(o=e.apply(s,r),s=r=null))};return function(){s=this,r=arguments,a=+new Date;var u=n&&!i;return i||(i=setTimeout(l,t)),u&&(o=e.apply(s,r),s=r=null),o}}function Me(n,i,r){var o,l,u,h,s=n[0],a=1==n.length&&"string"==typeof s;return t.isMoment(s)||oe(s)||void 0===s?h=t.apply(null,n):(o=!1,l=!1,a?He.test(s)?(s+="-01",n=[s],o=!0,l=!0):(u=Re.exec(s))&&(o=!u[5],l=!0):e.isArray(s)&&(l=!0),h=i||o?t.utc.apply(t,n):t.apply(null,n),o?(h._ambigTime=!0,h._ambigZone=!0):r&&(l?h._ambigZone=!0:a&&h.utcOffset(s))),h._fullCalendar=!0,h}function Be(e){return"en"!==e.locale()?e.clone().locale("en"):e}function Fe(){}function Ae(e,t){var n;return fe(t,"constructor")&&(n=t.constructor),"function"!=typeof n&&(n=t.constructor=function(){e.apply(this,arguments)}),n.prototype=ce(e.prototype),de(t,n.prototype),de(e,n),n}function Ve(e,t){de(t,e.prototype)}function Pe(e,t){e.then=function(n){return"function"==typeof n&&n(t),e}}function _e(e){e.then=function(t,n){return"function"==typeof n&&n(),e}}function Xe(e,t){return e||t?e&&t?e.component===t.component&&Ke(e,t)&&Ke(t,e):!1:!0}function Ke(e,t){for(var n in e)if(!/^(component|left|right|top|bottom)$/.test(n)&&e[n]!==t[n])return!1;return!0}function nt(e){return{start:e.start.clone(),end:e.end?e.end.clone():null,allDay:e.allDay}}function it(e){var t=st(e);return"background"===t||"inverse-background"===t}function rt(e){return"inverse-background"===st(e)}function st(e){return pe((e.source||{}).rendering,e.rendering)}function at(e){var n,i,t={};for(n=0;n<e.length;n++)i=e[n],(t[i._id]||(t[i._id]=[])).push(i);return t}function ot(e,t){return e.start-t.start}function lt(i){var s,a,o,l,r=n.dataAttrPrefix;return r&&(r+="-"),s=i.data(r+"event")||null,s&&(s="object"==typeof s?e.extend({},s):{},a=s.start,null==a&&(a=s.time),o=s.duration,l=s.stick,delete s.start,delete s.time,delete s.duration,delete s.stick),null==a&&(a=i.data(r+"start")),null==a&&(a=i.data(r+"time")),null==o&&(o=i.data(r+"duration")),null==l&&(l=i.data(r+"stick")),a=null!=a?t.duration(a):null,o=null!=o?t.duration(o):null,l=Boolean(l),{eventProps:s,startTime:a,duration:o,stick:l}}function ct(e,t){var n,i;for(n=0;n<t.length;n++)if(i=t[n],i.leftCol<=e.rightCol&&i.rightCol>=e.leftCol)return!0;return!1}function dt(e,t){return e.leftCol-t.leftCol}function vt(e){var n,i,r,t=[];for(n=0;n<e.length;n++){for(i=e[n],r=0;r<t.length&&mt(i,t[r]).length;r++);i.level=r,(t[r]||(t[r]=[])).push(i)}return t}function gt(e){var t,n,i,r,s;for(t=0;t<e.length;t++)for(n=e[t],i=0;i<n.length;i++)for(r=n[i],r.forwardSegs=[],s=t+1;s<e.length;s++)mt(r,e[s],r.forwardSegs)}function pt(e){var i,r,t=e.forwardSegs,n=0;if(void 0===e.forwardPressure){for(i=0;i<t.length;i++)r=t[i],pt(r),n=Math.max(n,1+r.forwardPressure);e.forwardPressure=n}}function mt(e,t,n){n=n||[];for(var i=0;i<t.length;i++)yt(e,t[i])&&n.push(t[i]);return n}function yt(e,t){return e.bottom>t.top&&e.top<t.bottom}function bt(e){this.items=e||[]}function Et(t,n){function o(e){n=e}function l(){var i=n.layout;a=t.opt("theme")?"ui":"fc",i?(r?r.empty():r=this.el=e("<div class='fc-toolbar "+n.extraClasses+"'/>"),r.append(h("left")).append(h("right")).append(h("center")).append('<div class="fc-clear"/>')):u()}function u(){r&&(r.remove(),r=i.el=null)}function h(i){var r=e('<div class="fc-'+i+'"/>'),o=n.layout[i],l=t.opt("customButtons")||{},u=t.opt("buttonText")||{};return o&&e.each(o.split(" "),function(n){var h,i=e(),o=!0;e.each(this.split(","),function(n,r){var h,c,d,f,v,g,p,m,y,w;"title"==r?(i=i.add(e("<h2>&nbsp;</h2>")),o=!1):((h=l[r])?(d=function(e){h.click&&h.click.call(w[0],e)},f="",v=h.text):(c=t.getViewSpec(r))?(d=function(){t.changeView(r)},s.push(r),f=c.buttonTextOverride,v=c.buttonTextDefault):t[r]&&(d=function(){t[r]()},f=(t.overrides.buttonText||{})[r],v=u[r]),d&&(g=h?h.themeIcon:t.opt("themeButtonIcons")[r],p=h?h.icon:t.opt("buttonIcons")[r],m=f?me(f):g&&t.opt("theme")?"<span class='ui-icon ui-icon-"+g+"'></span>":p&&!t.opt("theme")?"<span class='fc-icon fc-icon-"+p+"'></span>":me(v),y=["fc-"+r+"-button",a+"-button",a+"-state-default"],w=e('<button type="button" class="'+y.join(" ")+'">'+m+"</button>").click(function(e){w.hasClass(a+"-state-disabled")||(d(e),(w.hasClass(a+"-state-active")||w.hasClass(a+"-state-disabled"))&&w.removeClass(a+"-state-hover"))}).mousedown(function(){w.not("."+a+"-state-active").not("."+a+"-state-disabled").addClass(a+"-state-down")}).mouseup(function(){w.removeClass(a+"-state-down")}).hover(function(){w.not("."+a+"-state-active").not("."+a+"-state-disabled").addClass(a+"-state-hover")},function(){w.removeClass(a+"-state-hover").removeClass(a+"-state-down")}),i=i.add(w)))}),o&&i.first().addClass(a+"-corner-left").end().last().addClass(a+"-corner-right").end(),i.length>1?(h=e("<div/>"),o&&h.addClass("fc-button-group"),h.append(i),r.append(h)):r.append(i)}),r}function c(e){r&&r.find("h2").text(e)}function d(e){r&&r.find(".fc-"+e+"-button").addClass(a+"-state-active")}function f(e){r&&r.find(".fc-"+e+"-button").removeClass(a+"-state-active")}function v(e){r&&r.find(".fc-"+e+"-button").prop("disabled",!0).addClass(a+"-state-disabled")}function g(e){r&&r.find(".fc-"+e+"-button").prop("disabled",!1).removeClass(a+"-state-disabled")}function p(){return s}var i=this;i.setToolbarOptions=o,i.render=l,i.removeElement=u,i.updateTitle=c,i.activateButton=d,i.deactivateButton=f,i.disableButton=v,i.enableButton=g,i.getViewsWithButtons=p,i.el=null;var r,a,s=[]}function xt(t){e.each(Rt,function(e,n){null==t[e]&&(t[e]=n(t))})}function It(e){return t.localeData(e)||t.localeData("en")}function Bt(){function c(e,t){return!i.opt("lazyFetching")||v(e,t)?g(e,t):Oe.resolve(h)}function d(){h=f(u),i.trigger("eventsReset",h)}function f(e){var n,r,t=[];for(n=0;n<e.length;n++)r=e[n],r.start.clone().stripZone()<o&&i.getEventEnd(r).stripZone()>a&&t.push(r);return t}function v(e,t){return!a||a>e||t>o}function g(e,t){return a=e,o=t,p()}function p(){return y(s,"reset")}function m(e){return y(k(e))}function y(e,t){var n,r;for("reset"===t?u=[]:"add"!==t&&(u=N(u,e)),n=0;n<e.length;n++)r=e[n],"pending"!==r._status&&l++,r._fetchId=(r._fetchId||0)+1,r._status="pending";for(n=0;n<e.length;n++)r=e[n],w(r,r._fetchId);return l?Oe.construct(function(e){i.one("eventsReceived",e)}):Oe.resolve(h)}function w(t,n){E(t,function(i){var s,a,o,r=e.isArray(t.events);if(n===t._fetchId&&"rejected"!==t._status){if(t._status="resolved",i)for(s=0;s<i.length;s++)a=i[s],o=r?a:j(a,t),o&&u.push.apply(u,X(o));b()}})}function S(e){var t="pending"===e._status;e._status="rejected",t&&b()}function b(){l--,l||(d(u),i.trigger("eventsReceived",h))}function E(t,r){var s,u,l=n.sourceFetchers;for(s=0;s<l.length;s++){if(u=l[s].call(i,t,a.clone(),o.clone(),i.opt("timezone"),r),u===!0)return;if("object"==typeof u)return void E(u,r)}var h=t.events;if(h)e.isFunction(h)?(i.pushLoading(),h.call(i,a.clone(),o.clone(),i.opt("timezone"),function(e){r(e),i.popLoading()})):e.isArray(h)?r(h):r();else{var c=t.url;if(c){var g,d=t.success,f=t.error,v=t.complete;g=e.isFunction(t.data)?t.data():t.data;var p=e.extend({},g||{}),m=pe(t.startParam,i.opt("startParam")),y=pe(t.endParam,i.opt("endParam")),w=pe(t.timezoneParam,i.opt("timezoneParam"));m&&(p[m]=a.format()),y&&(p[y]=o.format()),i.opt("timezone")&&"local"!=i.opt("timezone")&&(p[w]=i.opt("timezone")),i.pushLoading(),e.ajax(e.extend({},kt,t,{data:p,success:function(t){t=t||[];var n=ge(d,this,arguments);e.isArray(n)&&(t=n),r(t)},error:function(){ge(f,this,arguments),r()},complete:function(){ge(v,this,arguments),i.popLoading()}}))}else r()}}function D(e){var t=T(e);t&&(s.push(t),y([t],"add"))}function T(t){var s,a,r=n.sourceNormalizers;if(e.isFunction(t)||e.isArray(t)?s={events:t}:"string"==typeof t?s={url:t}:"object"==typeof t&&(s=e.extend({},t)),s){for(s.className?"string"==typeof s.className&&(s.className=s.className.split(/\s+/)):s.className=[],e.isArray(s.events)&&(s.origArray=s.events,s.events=e.map(s.events,function(e){return j(e,s)})),a=0;a<r.length;a++)r[a].call(i,s);return s}}function C(e){R(M(e))}function H(e){null==e?R(s,!0):R(k(e))}function R(t,n){var i;for(i=0;i<t.length;i++)S(t[i]);n?(s=[],u=[]):(s=e.grep(s,function(e){for(i=0;i<t.length;i++)if(e===t[i])return!1;return!0}),u=N(u,t)),d()}function x(){return s.slice(1)}function I(t){return e.grep(s,function(e){return e.id&&e.id===t})[0]}function k(t){t?e.isArray(t)||(t=[t]):t=[];var i,n=[];for(i=0;i<t.length;i++)n.push.apply(n,M(t[i]));return n}function M(t){var n,i;for(n=0;n<s.length;n++)if(i=s[n],i===t)return[i];return i=I(t),i?[i]:e.grep(s,function(e){return B(t,e)})}function B(e,t){return e&&t&&L(e)==L(t)}function L(e){return("object"==typeof e?e.origArray||e.googleCalendarId||e.url||e.events:null)||e}function N(t,n){return e.grep(t,function(e){for(var t=0;t<n.length;t++)if(e.source===n[t])return!1;return!0})}function z(e){F([e])}function F(e){var t,n;for(t=0;t<e.length;t++)n=e[t],n.start=i.moment(n.start),n.end?n.end=i.moment(n.end):n.end=null,K(n,A(n));d()}function A(t){var n={};return e.each(t,function(e,t){V(e)&&void 0!==t&&ve(t)&&(n[e]=t)}),n}function V(e){return!/^_|^(id|allDay|start|end)$/.test(e)}function G(e,t){return O([e],t)}function O(e,t){var i,s,a,o,l,n=[];for(a=0;a<e.length;a++)if(s=j(e[a])){for(i=X(s),o=0;o<i.length;o++)l=i[o],l.source||(t&&(r.events.push(l),l.source=r),u.push(l));n=n.concat(i)}return n.length&&d(),n}function P(t){var n,i;for(null==t?t=function(){return!0}:e.isFunction(t)||(n=t+"",t=function(e){return e._id==n}),u=e.grep(u,t,!0),i=0;i<s.length;i++)e.isArray(s[i].events)&&(s[i].events=e.grep(s[i].events,t,!0));d()}function q(t){return e.isFunction(t)?e.grep(u,t):null!=t?(t+="",e.grep(u,function(e){return e._id==t})):u}function U(e){e.start=i.moment(e.start),e.end&&(e.end=i.moment(e.end)),Lt(e)}function j(n,r){var o,l,u,s=i.opt("eventDataTransform"),a={};if(s&&(n=s(n)),r&&r.eventDataTransform&&(n=r.eventDataTransform(n)),e.extend(a,n),r&&(a.source=r),a._id=n._id||(void 0===n.id?"_fc"+Mt++:n.id+""),n.className?"string"==typeof n.className?a.className=n.className.split(/\s+/):a.className=n.className:a.className=[],o=n.start||n.date,l=n.end,le(o)&&(o=t.duration(o)),le(l)&&(l=t.duration(l)),n.dow||t.isDuration(o)||t.isDuration(l))a.start=o?t.duration(o):null,a.end=l?t.duration(l):null,a._recurring=!0;else{if(o&&(o=i.moment(o),!o.isValid()))return!1;l&&(l=i.moment(l),l.isValid()||(l=null)),u=n.allDay,void 0===u&&(u=pe(r?r.allDayDefault:void 0,i.opt("allDayDefault"))),Z(o,l,u,a)}return i.normalizeEvent(a),a}function Z(e,t,n,i){i.start=e,i.end=t,i.allDay=n,$(i),Lt(i)}function $(e){Q(e),e.end&&!e.end.isAfter(e.start)&&(e.end=null),e.end||(i.opt("forceEventDuration")?e.end=i.getDefaultEventEnd(e.allDay,e.start):e.end=null)}function Q(e){null==e.allDay&&(e.allDay=!(e.start.hasTime()||e.end&&e.end.hasTime())),e.allDay?(e.start.stripTime(),e.end&&e.end.stripTime()):(e.start.hasTime()||(e.start=i.applyTimezone(e.start.time(0))),e.end&&!e.end.hasTime()&&(e.end=i.applyTimezone(e.end.time(0))))}function X(t,n,i){var s,l,u,h,c,d,f,v,g,r=[];if(n=n||a,i=i||o,t)if(t._recurring){if(l=t.dow)for(s={},u=0;u<l.length;u++)s[l[u]]=!0;for(h=n.clone().stripTime();h.isBefore(i);)(!s||s[h.day()])&&(c=t.start,d=t.end,f=h.clone(),v=null,c&&(f=f.time(c)),d&&(v=h.clone().time(d)),g=e.extend({},t),Z(f,v,!c&&!d,g),r.push(g)),h.add(1,"days")}else r.push(t);return r}function K(t,n,r){function d(e,t){return r?Y(e,t,r):n.allDay?W(e,t):_(e,t)}var a,o,l,u,h,c,s={};return n=n||{},n.start||(n.start=t.start.clone()),void 0===n.end&&(n.end=t.end?t.end.clone():null),null==n.allDay&&(n.allDay=t.allDay),$(n),a={start:t._start.clone(),end:t._end?t._end.clone():i.getDefaultEventEnd(t._allDay,t._start),allDay:n.allDay},$(a),o=null!==t._end&&null===n.end,l=d(n.start,a.start),n.end?(u=d(n.end,a.end),h=u.subtract(l)):h=null,e.each(n,function(e,t){V(e)&&void 0!==t&&(s[e]=t)}),c=J(q(t._id),o,n.allDay,l,h,s),{dateDelta:l,durationDelta:h,undo:c}}function J(t,n,r,s,a,o){var l=i.getIsAmbigTimezone(),u=[];return s&&!s.valueOf()&&(s=null),a&&!a.valueOf()&&(a=null),e.each(t,function(t,h){var c,d;c={start:h.start.clone(),end:h.end?h.end.clone():null,allDay:h.allDay},e.each(o,function(e){c[e]=h[e]}),d={start:h._start,end:h._end,allDay:r},$(d),n?d.end=null:a&&!d.end&&(d.end=i.getDefaultEventEnd(d.allDay,d.start)),s&&(d.start.add(s),d.end&&d.end.add(s)),a&&d.end.add(a),l&&!d.allDay&&(s||a)&&(d.start.stripZone(),d.end&&d.end.stripZone()),e.extend(h,o,d),Lt(h),u.push(function(){e.extend(h,c),Lt(h)})}),function(){for(var e=0;e<u.length;e++)u[e]()}}var i=this;i.requestEvents=c,i.reportEventChange=d,i.isFetchNeeded=v,i.fetchEvents=g,i.fetchEventSources=y,i.refetchEvents=p,i.refetchEventSources=m,i.getEventSources=x,i.getEventSourceById=I,i.addEventSource=D,i.removeEventSource=C,i.removeEventSources=H,i.updateEvent=z,i.updateEvents=F,i.renderEvent=G,i.renderEvents=O,i.removeEvents=P,i.clientEvents=q,i.mutateEvent=K,i.normalizeEventDates=$,i.normalizeEventTimes=Q;var a,o,h,r={events:[]},s=[r],l=0,u=[];e.each((i.opt("events")?[i.opt("events")]:[]).concat(i.opt("eventSources")||[]),function(e,t){var n=T(t);n&&s.push(n)}),i.getEventCache=function(){return u},i.rezoneArrayEventSources=function(){var t,n,i;for(t=0;t<s.length;t++)if(n=s[t].events,e.isArray(n))for(i=0;i<n.length;i++)U(n[i])},i.buildEventFromInput=j,i.expandEvent=X}function Lt(e){e._allDay=e.allDay,e._start=e.start.clone(),e._end=e.end?e.end.clone():null}var n=e.fullCalendar={version:"3.4.0",internalApiVersion:9},i=n.views={};e.fn.fullCalendar=function(t){var n=Array.prototype.slice.call(arguments,1),i=this;return this.each(function(r,s){var l,a=e(s),o=a.data("fullCalendar");"string"==typeof t?o&&e.isFunction(o[t])&&(l=o[t].apply(o,n),r||(i=l),"destroy"===t&&a.removeData("fullCalendar")):o||(o=new Dt(a,t),a.data("fullCalendar",o),o.render())}),i};var r=["header","footer","buttonText","buttonIcons","themeButtonIcons"];n.intersectRanges=G,n.applyAll=ge,n.debounce=Ce,n.isInt=De,n.htmlEscape=me,n.cssToStr=we,n.proxy=Te,n.capitaliseFirstLetter=be,n.getOuterRect=g,n.getClientRect=p,n.getContentRect=m,n.getScrollbarWidths=y;var S=null;n.preventDefault=k,n.intersectRects=M,n.parseFieldSpecs=z,n.compareByFieldSpecs=F,n.compareByFieldSpec=A,n.flexibleCompare=V,n.computeGreatestUnit=q,n.divideRangeByDuration=Z,n.divideDurationByDuration=$,n.multiplyDuration=Q,n.durationHasTime=ae;var O=["sun","mon","tue","wed","thu","fri","sat"],P=["year","month","week","day","hour","minute","second","millisecond"];n.log=function(){var e=window.console;return e&&e.log?e.log.apply(e,arguments):void 0},n.warn=function(){var e=window.console;return e&&e.warn?e.warn.apply(e,arguments):n.log.apply(n,arguments)};var ue={}.hasOwnProperty;n.createObject=ce;var He=/^\s*\d{4}-\d\d$/,Re=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,xe=t.fn,Ie=e.extend({},xe),ke=t.momentProperties;ke.push("_fullCalendar"),ke.push("_ambigTime"),ke.push("_ambigZone"),n.moment=function(){return Me(arguments)},n.moment.utc=function(){var e=Me(arguments,!0);return e.hasTime()&&e.utc(),e},n.moment.parseZone=function(){return Me(arguments,!0,!0)},xe.week=xe.weeks=function(e){var t=this._locale._fullCalendar_weekCalc;return null==e&&"function"==typeof t?t(this):"ISO"===t?Ie.isoWeek.apply(this,arguments):Ie.week.apply(this,arguments)},xe.time=function(e){if(!this._fullCalendar)return Ie.time.apply(this,arguments);if(null==e)return t.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,t.isDuration(e)||t.isMoment(e)||(e=t.duration(e));var n=0;return t.isDuration(e)&&(n=24*Math.floor(e.asDays())),this.hours(n+e.hours()).minutes(e.minutes()).seconds(e.seconds()).milliseconds(e.milliseconds())},xe.stripTime=function(){return this._ambigTime||(this.utc(!0),this.set({hours:0,minutes:0,seconds:0,ms:0}),this._ambigTime=!0,this._ambigZone=!0),this},xe.hasTime=function(){return!this._ambigTime},xe.stripZone=function(){var e;return this._ambigZone||(e=this._ambigTime,this.utc(!0),this._ambigTime=e||!1,this._ambigZone=!0),this},xe.hasZone=function(){return!this._ambigZone},xe.local=function(e){return Ie.local.call(this,this._ambigZone||e),this._ambigTime=!1,this._ambigZone=!1,this},xe.utc=function(e){return Ie.utc.call(this,e),this._ambigTime=!1,this._ambigZone=!1,this},xe.utcOffset=function(e){return null!=e&&(this._ambigTime=!1,this._ambigZone=!1),Ie.utcOffset.apply(this,arguments)},xe.format=function(){return this._fullCalendar&&arguments[0]?Le(this,arguments[0]):this._ambigTime?ze(Be(this),"YYYY-MM-DD"):this._ambigZone?ze(Be(this),"YYYY-MM-DD[T]HH:mm:ss"):this._fullCalendar?ze(Be(this)):Ie.format.apply(this,arguments)},xe.toISOString=function(){return this._ambigTime?ze(Be(this),"YYYY-MM-DD"):this._ambigZone?ze(Be(this),"YYYY-MM-DD[T]HH:mm:ss"):this._fullCalendar?Ie.toISOString.apply(Be(this),arguments):Ie.toISOString.apply(this,arguments)},function(){function o(e,t){return y(d(t).fakeFormatString,e)}function l(e,t){return Ie.format.call(e,t)}function u(e,t,i,r,s){var a;return e=n.moment.parseZone(e),t=n.moment.parseZone(t),a=e.localeData(),i=a.longDateFormat(i)||i,h(d(i),e,t,r||" - ",s)}function h(e,t,n,i,r){var h,d,v,s=e.sameUnits,a=t.clone().stripZone(),o=n.clone().stripZone(),l=w(e.fakeFormatString,t),u=w(e.fakeFormatString,n),c="",f="",g="",p="",m="";for(h=0;h<s.length&&(!s[h]||a.isSame(o,s[h]));h++)c+=l[h];for(d=s.length-1;d>h&&(!s[d]||a.isSame(o,s[d]))&&(d-1!==h||"."!==l[d]);d--)f=l[d]+f;for(v=h;d>=v;v++)g+=l[v],p+=u[v];return(g||p)&&(m=r?p+i+g:g+i+p),S(c+m+f)}function d(e){return c[e]||(c[e]=f(e))}function f(e){var t=v(e);return{fakeFormatString:p(t),sameUnits:m(t)}}function v(e){for(var n,t=[],i=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;n=i.exec(e);)n[1]?t.push.apply(t,g(n[1])):n[2]?t.push({maybe:v(n[2])}):n[3]?t.push({token:n[3]}):n[5]&&t.push.apply(t,g(n[5]));return t}function g(e){return". "===e?["."," "]:[e]}function p(n){var a,o,r=[];for(a=0;a<n.length;a++)o=n[a],"string"==typeof o?r.push("["+o+"]"):o.token?o.token in s?r.push(t+"["+o.token+"]"):r.push(o.token):o.maybe&&r.push(i+p(o.maybe)+i);return r.join(e)}function m(e){var n,i,r,t=[];for(n=0;n<e.length;n++)i=e[n],i.token?(r=a[i.token.charAt(0)],t.push(r?r.unit:"second")):i.maybe?t.push.apply(t,m(i.maybe)):t.push(null);return t}function y(e,t){return S(w(e,t).join(""))}function w(n,i){var u,h,r=[],a=l(i,n),o=a.split(e);for(u=0;u<o.length;u++)h=o[u],h.charAt(0)===t?r.push(s[h.substring(1)](i)):r.push(h);return r}function S(e){return e.replace(r,function(e,t){return t.match(/[1-9]/)?t:""})}function b(e){var n,i,r,s,t=v(e);for(n=0;n<t.length;n++)i=t[n],i.token&&(r=a[i.token.charAt(0)],r&&(!s||r.value>s.value)&&(s=r));return s?s.unit:null}n.formatDate=o,n.formatRange=u,n.oldMomentFormat=l,n.queryMostGranularFormatUnit=b;var e="",t="",i="",r=new RegExp(i+"([^"+i+"]*)"+i,"g"),s={t:function(e){return l(e,"a").charAt(0)},T:function(e){return l(e,"A").charAt(0)}},a={Y:{value:1,unit:"year"},M:{value:2,unit:"month"},W:{value:3,unit:"week"},w:{value:3,unit:"week"},D:{value:4,unit:"day"},d:{value:4,unit:"day"}},c={}}();var Le=n.formatDate,Ne=n.formatRange,ze=n.oldMomentFormat;n.Class=Fe,Fe.extend=function(){var t,n,e=arguments.length;for(t=0;e>t;t++)n=arguments[t],e-1>t&&Ve(this,n);return Ae(this,n||{})},Fe.mixin=function(e){Ve(this,e)};var Ge=Fe.extend(qe,Ue,{_props:null,_watchers:null,_globalWatchArgs:null,constructor:function(){this._watchers={},this._props={},this.applyGlobalWatchers()},applyGlobalWatchers:function(){var t,e=this._globalWatchArgs||[];for(t=0;t<e.length;t++)this.watch.apply(this,e[t])},has:function(e){return e in this._props},get:function(e){return void 0===e?this._props:this._props[e]},set:function(e,t){var n;"string"==typeof e?(n={},n[e]=void 0===t?null:t):n=e,this.setProps(n)},reset:function(e){var i,t=this._props,n={};for(i in t)n[i]=void 0;for(i in e)n[i]=e[i];this.setProps(n)},unset:function(e){var n,i,t={};for(n="string"==typeof e?[e]:e,i=0;i<n.length;i++)t[n[i]]=void 0;this.setProps(t)},setProps:function(e){var i,r,t={},n=0;for(i in e)r=e[i],("object"==typeof r||r!==this._props[i])&&(t[i]=r,n++);if(n){this.trigger("before:batchChange",t);for(i in t)r=t[i],this.trigger("before:change",i,r),this.trigger("before:change:"+i,r);for(i in t)r=t[i],void 0===r?delete this._props[i]:this._props[i]=r,this.trigger("change:"+i,r),this.trigger("change",i,r);this.trigger("batchChange",t)}},watch:function(e,t,n,i){var r=this;this.unwatch(e),this._watchers[e]=this._watchDeps(t,function(t){var i=n.call(r,t);i&&i.then?(r.unset(e),i.then(function(t){r.set(e,t)})):r.set(e,i)},function(){r.unset(e),i&&i.call(r)})},unwatch:function(e){var t=this._watchers[e];t&&(delete this._watchers[e],t.teardown())},_watchDeps:function(e,t,n){function h(e,t,i){r++,1===r&&a===s&&(u=!0,n(),u=!1)}function c(e,n,i){void 0===n?(i||void 0===o[e]||a--,delete o[e]):(i||void 0!==o[e]||a++,o[e]=n),r--,r||a===s&&(u||t(o))}function d(e,t){i.on(e,t),l.push([e,t])}var i=this,r=0,s=e.length,a=0,o={},l=[],u=!1;return e.forEach(function(e){var t=!1;"?"===e.charAt(0)&&(e=e.substring(1),t=!0),d("before:change:"+e,function(n){h(e,n,t)}),d("change:"+e,function(n){c(e,n,t)})}),e.forEach(function(e){var t=!1;"?"===e.charAt(0)&&(e=e.substring(1),t=!0),i.has(e)?(o[e]=i.get(e),a++):t&&a++}),a===s&&t(o),{teardown:function(){for(var e=0;e<l.length;e++)i.off(l[e][0],l[e][1]);l=null,a===s&&n()},flash:function(){a===s&&(n(),t(o))}}},flash:function(e){var t=this._watchers[e];t&&t.flash()}});Ge.watch=function(){var e=this.prototype;e._globalWatchArgs||(e._globalWatchArgs=[]),e._globalWatchArgs.push(arguments)},n.Model=Ge;var Oe={construct:function(t){var n=e.Deferred(),i=n.promise();return"function"==typeof t&&t(function(e){n.resolve(e),Pe(i,e)},function(){n.reject(),_e(i)}),i},resolve:function(t){var n=e.Deferred().resolve(t),i=n.promise();return Pe(i,t),i},reject:function(){var t=e.Deferred().reject(),n=t.promise();return _e(n),n}};n.Promise=Oe;var We=Fe.extend(qe,{q:null,isPaused:!1,isRunning:!1,constructor:function(){this.q=[]},queue:function(){this.q.push.apply(this.q,arguments),this.tryStart()},pause:function(){this.isPaused=!0},resume:function(){this.isPaused=!1,this.tryStart()},tryStart:function(){!this.isRunning&&this.canRunNext()&&(this.isRunning=!0,this.trigger("start"),this.runNext())},canRunNext:function(){return!this.isPaused&&this.q.length},runNext:function(){this.runTask(this.q.shift())},runTask:function(e){this.runTaskFunc(e)},runTaskFunc:function(e){function i(){t.canRunNext()?t.runNext():(t.isRunning=!1,t.trigger("stop"))}var t=this,n=e();n&&n.then?n.then(i):i()}});n.TaskQueue=We;var Ye=We.extend({waitsByNamespace:null,waitNamespace:null,waitId:null,constructor:function(e){We.call(this),this.waitsByNamespace=e||{}},queue:function(e,t,n){var r,i={func:e,namespace:t,type:n};t&&(r=this.waitsByNamespace[t]),this.waitNamespace&&(t===this.waitNamespace&&null!=r?this.delayWait(r):(this.clearWait(),this.tryStart())),this.compoundTask(i)&&(this.waitNamespace||null==r?this.tryStart():this.startWait(t,r))},startWait:function(e,t){this.waitNamespace=e,this.spawnWait(t)},delayWait:function(e){clearTimeout(this.waitId),this.spawnWait(e)},spawnWait:function(e){var t=this;this.waitId=setTimeout(function(){t.waitNamespace=null,t.tryStart()},e)},clearWait:function(){this.waitNamespace&&(clearTimeout(this.waitId),this.waitId=null,this.waitNamespace=null)},canRunNext:function(){if(!We.prototype.canRunNext.apply(this,arguments))return!1;if(this.waitNamespace){for(var e=this.q,t=0;t<e.length;t++)if(e[t].namespace!==this.waitNamespace)return!0;return!1}return!0},runTask:function(e){this.runTaskFunc(e.func)},compoundTask:function(e){var i,r,t=this.q,n=!0;if(e.namespace&&("destroy"===e.type||"init"===e.type)){for(i=t.length-1;i>=0;i--)r=t[i],r.namespace!==e.namespace||"add"!==r.type&&"remove"!==r.type||t.splice(i,1);"destroy"===e.type?t.length&&(r=t[t.length-1],r.namespace===e.namespace&&("init"===r.type?(n=!1,t.pop()):"destroy"===r.type&&(n=!1))):"init"===e.type&&t.length&&(r=t[t.length-1],r.namespace===e.namespace&&"init"===r.type&&t.pop())}return n&&t.push(e),n}});n.RenderQueue=Ye;var qe=n.EmitterMixin={on:function(t,n){return e(this).on(t,this._prepareIntercept(n)),this},one:function(t,n){return e(this).one(t,this._prepareIntercept(n)),this},_prepareIntercept:function(t){var n=function(e,n){return t.apply(n.context||this,n.args||[])};return t.guid||(t.guid=e.guid++),n.guid=t.guid,n},off:function(t,n){return e(this).off(t,n),
this},trigger:function(t){var n=Array.prototype.slice.call(arguments,1);return e(this).triggerHandler(t,{args:n}),this},triggerWith:function(t,n,i){return e(this).triggerHandler(t,{context:n,args:i}),this}},Ue=n.ListenerMixin=function(){var t=0,n={listenerId:null,listenTo:function(t,n,i){if("object"==typeof n)for(var r in n)n.hasOwnProperty(r)&&this.listenTo(t,r,n[r]);else"string"==typeof n&&t.on(n+"."+this.getListenerNamespace(),e.proxy(i,this))},stopListeningTo:function(e,t){e.off((t||"")+"."+this.getListenerNamespace())},getListenerNamespace:function(){return null==this.listenerId&&(this.listenerId=t++),"_listener"+this.listenerId}};return n}(),je=Fe.extend(Ue,{isHidden:!0,options:null,el:null,margin:10,constructor:function(e){this.options=e||{}},show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var t=this,n=this.options;this.el=e('<div class="fc-popover"/>').addClass(n.className||"").css({top:0,left:0}).append(n.content).appendTo(n.parentEl),this.el.on("click",".fc-close",function(){t.hide()}),n.autoHide&&this.listenTo(e(document),"mousedown",this.documentMousedown)},documentMousedown:function(t){this.el&&!e(t.target).closest(this.el).length&&this.hide()},removeElement:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),this.stopListeningTo(e(document),"mousedown")},position:function(){var o,l,u,h,c,t=this.options,n=this.el.offsetParent().offset(),i=this.el.outerWidth(),r=this.el.outerHeight(),s=e(window),a=v(this.el);h=t.top||0,c=void 0!==t.left?t.left:void 0!==t.right?t.right-i:0,a.is(window)||a.is(document)?(a=s,o=0,l=0):(u=a.offset(),o=u.top,l=u.left),o+=s.scrollTop(),l+=s.scrollLeft(),t.viewportConstrain!==!1&&(h=Math.min(h,o+a.outerHeight()-r-this.margin),h=Math.max(h,o+this.margin),c=Math.min(c,l+a.outerWidth()-i-this.margin),c=Math.max(c,l+this.margin)),this.el.css({top:h-n.top,left:c-n.left})},trigger:function(e){this.options[e]&&this.options[e].apply(this,Array.prototype.slice.call(arguments,1))}}),Ze=n.CoordCache=Fe.extend({els:null,forcedOffsetParentEl:null,origin:null,boundingRect:null,isHorizontal:!1,isVertical:!1,lefts:null,rights:null,tops:null,bottoms:null,constructor:function(t){this.els=e(t.els),this.isHorizontal=t.isHorizontal,this.isVertical=t.isVertical,this.forcedOffsetParentEl=t.offsetParent?e(t.offsetParent):null},build:function(){var e=this.forcedOffsetParentEl;!e&&this.els.length>0&&(e=this.els.eq(0).offsetParent()),this.origin=e?e.offset():null,this.boundingRect=this.queryBoundingRect(),this.isHorizontal&&this.buildElHorizontals(),this.isVertical&&this.buildElVerticals()},clear:function(){this.origin=null,this.boundingRect=null,this.lefts=null,this.rights=null,this.tops=null,this.bottoms=null},ensureBuilt:function(){this.origin||this.build()},buildElHorizontals:function(){var t=[],n=[];this.els.each(function(i,r){var s=e(r),a=s.offset().left,o=s.outerWidth();t.push(a),n.push(a+o)}),this.lefts=t,this.rights=n},buildElVerticals:function(){var t=[],n=[];this.els.each(function(i,r){var s=e(r),a=s.offset().top,o=s.outerHeight();t.push(a),n.push(a+o)}),this.tops=t,this.bottoms=n},getHorizontalIndex:function(e){this.ensureBuilt();var r,t=this.lefts,n=this.rights,i=t.length;for(r=0;i>r;r++)if(e>=t[r]&&e<n[r])return r},getVerticalIndex:function(e){this.ensureBuilt();var r,t=this.tops,n=this.bottoms,i=t.length;for(r=0;i>r;r++)if(e>=t[r]&&e<n[r])return r},getLeftOffset:function(e){return this.ensureBuilt(),this.lefts[e]},getLeftPosition:function(e){return this.ensureBuilt(),this.lefts[e]-this.origin.left},getRightOffset:function(e){return this.ensureBuilt(),this.rights[e]},getRightPosition:function(e){return this.ensureBuilt(),this.rights[e]-this.origin.left},getWidth:function(e){return this.ensureBuilt(),this.rights[e]-this.lefts[e]},getTopOffset:function(e){return this.ensureBuilt(),this.tops[e]},getTopPosition:function(e){return this.ensureBuilt(),this.tops[e]-this.origin.top},getBottomOffset:function(e){return this.ensureBuilt(),this.bottoms[e]},getBottomPosition:function(e){return this.ensureBuilt(),this.bottoms[e]-this.origin.top},getHeight:function(e){return this.ensureBuilt(),this.bottoms[e]-this.tops[e]},queryBoundingRect:function(){var e;return this.els.length>0&&(e=v(this.els.eq(0)),!e.is(document))?p(e):null},isPointInBounds:function(e,t){return this.isLeftInBounds(e)&&this.isTopInBounds(t)},isLeftInBounds:function(e){return!this.boundingRect||e>=this.boundingRect.left&&e<this.boundingRect.right},isTopInBounds:function(e){return!this.boundingRect||e>=this.boundingRect.top&&e<this.boundingRect.bottom}}),$e=n.DragListener=Fe.extend(Ue,{options:null,subjectEl:null,originX:null,originY:null,scrollEl:null,isInteracting:!1,isDistanceSurpassed:!1,isDelayEnded:!1,isDragging:!1,isTouch:!1,isGeneric:!1,delay:null,delayTimeoutId:null,minDistance:null,shouldCancelTouchScroll:!0,scrollAlwaysKills:!1,constructor:function(e){this.options=e||{}},startInteraction:function(t,n){if("mousedown"===t.type){if(Je.get().shouldIgnoreMouse())return;if(!T(t))return;t.preventDefault()}this.isInteracting||(n=n||{},this.delay=pe(n.delay,this.options.delay,0),this.minDistance=pe(n.distance,this.options.distance,0),this.subjectEl=this.options.subjectEl,x(e("body")),this.isInteracting=!0,this.isTouch=R(t),this.isGeneric="dragstart"===t.type,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.originX=C(t),this.originY=H(t),this.scrollEl=v(e(t.target)),this.bindHandlers(),this.initAutoScroll(),this.handleInteractionStart(t),this.startDelay(t),this.minDistance||this.handleDistanceSurpassed(t))},handleInteractionStart:function(e){this.trigger("interactionStart",e)},endInteraction:function(t,n){this.isInteracting&&(this.endDrag(t),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null),this.destroyAutoScroll(),this.unbindHandlers(),this.isInteracting=!1,this.handleInteractionEnd(t,n),I(e("body")))},handleInteractionEnd:function(e,t){this.trigger("interactionEnd",e,t||!1)},bindHandlers:function(){var t=Je.get();this.isGeneric?this.listenTo(e(document),{drag:this.handleMove,dragstop:this.endInteraction}):this.isTouch?this.listenTo(t,{touchmove:this.handleTouchMove,touchend:this.endInteraction,scroll:this.handleTouchScroll}):this.listenTo(t,{mousemove:this.handleMouseMove,mouseup:this.endInteraction}),this.listenTo(t,{selectstart:k,contextmenu:k})},unbindHandlers:function(){this.stopListeningTo(Je.get()),this.stopListeningTo(e(document))},startDrag:function(e,t){this.startInteraction(e,t),this.isDragging||(this.isDragging=!0,this.handleDragStart(e))},handleDragStart:function(e){this.trigger("dragStart",e)},handleMove:function(e){var r,t=C(e)-this.originX,n=H(e)-this.originY,i=this.minDistance;this.isDistanceSurpassed||(r=t*t+n*n,r>=i*i&&this.handleDistanceSurpassed(e)),this.isDragging&&this.handleDrag(t,n,e)},handleDrag:function(e,t,n){this.trigger("drag",e,t,n),this.updateAutoScroll(n)},endDrag:function(e){this.isDragging&&(this.isDragging=!1,this.handleDragEnd(e))},handleDragEnd:function(e){this.trigger("dragEnd",e)},startDelay:function(e){var t=this;this.delay?this.delayTimeoutId=setTimeout(function(){t.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)},handleDelayEnd:function(e){this.isDelayEnded=!0,this.isDistanceSurpassed&&this.startDrag(e)},handleDistanceSurpassed:function(e){this.isDistanceSurpassed=!0,this.isDelayEnded&&this.startDrag(e)},handleTouchMove:function(e){this.isDragging&&this.shouldCancelTouchScroll&&e.preventDefault(),this.handleMove(e)},handleMouseMove:function(e){this.handleMove(e)},handleTouchScroll:function(e){(!this.isDragging||this.scrollAlwaysKills)&&this.endInteraction(e,!0)},trigger:function(e){this.options[e]&&this.options[e].apply(this,Array.prototype.slice.call(arguments,1)),this["_"+e]&&this["_"+e].apply(this,Array.prototype.slice.call(arguments,1))}});$e.mixin({isAutoScroll:!1,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,initAutoScroll:function(){var e=this.scrollEl;this.isAutoScroll=this.options.scroll&&e&&!e.is(window)&&!e.is(document),this.isAutoScroll&&this.listenTo(e,"scroll",Ce(this.handleDebouncedScroll,100))},destroyAutoScroll:function(){this.endAutoScroll(),this.isAutoScroll&&this.stopListeningTo(this.scrollEl,"scroll")},computeScrollBounds:function(){this.isAutoScroll&&(this.scrollBounds=g(this.scrollEl))},updateAutoScroll:function(e){var i,r,s,a,t=this.scrollSensitivity,n=this.scrollBounds,o=0,l=0;n&&(i=(t-(H(e)-n.top))/t,r=(t-(n.bottom-H(e)))/t,s=(t-(C(e)-n.left))/t,a=(t-(n.right-C(e)))/t,i>=0&&1>=i?o=i*this.scrollSpeed*-1:r>=0&&1>=r&&(o=r*this.scrollSpeed),s>=0&&1>=s?l=s*this.scrollSpeed*-1:a>=0&&1>=a&&(l=a*this.scrollSpeed)),this.setScrollVel(o,l)},setScrollVel:function(e,t){this.scrollTopVel=e,this.scrollLeftVel=t,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(Te(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var e=this.scrollEl;this.scrollTopVel<0?e.scrollTop()<=0&&(this.scrollTopVel=0):this.scrollTopVel>0&&e.scrollTop()+e[0].clientHeight>=e[0].scrollHeight&&(this.scrollTopVel=0),this.scrollLeftVel<0?e.scrollLeft()<=0&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&e.scrollLeft()+e[0].clientWidth>=e[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var e=this.scrollEl,t=this.scrollIntervalMs/1e3;this.scrollTopVel&&e.scrollTop(e.scrollTop()+this.scrollTopVel*t),this.scrollLeftVel&&e.scrollLeft(e.scrollLeft()+this.scrollLeftVel*t),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.endAutoScroll()},endAutoScroll:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.handleScrollEnd())},handleDebouncedScroll:function(){this.scrollIntervalId||this.handleScrollEnd()},handleScrollEnd:function(){}});var Qe=$e.extend({component:null,origHit:null,hit:null,coordAdjust:null,constructor:function(e,t){$e.call(this,t),this.component=e},handleInteractionStart:function(e){var n,i,r,t=this.subjectEl;this.component.hitsNeeded(),this.computeScrollBounds(),e?(i={left:C(e),top:H(e)},r=i,t&&(n=g(t),r=B(r,n)),this.origHit=this.queryHit(r.left,r.top),t&&this.options.subjectCenter&&(this.origHit&&(n=M(this.origHit,n)||n),r=L(n)),this.coordAdjust=N(r,i)):(this.origHit=null,this.coordAdjust=null),$e.prototype.handleInteractionStart.apply(this,arguments)},handleDragStart:function(e){var t;$e.prototype.handleDragStart.apply(this,arguments),t=this.queryHit(C(e),H(e)),t&&this.handleHitOver(t)},handleDrag:function(e,t,n){var i;$e.prototype.handleDrag.apply(this,arguments),i=this.queryHit(C(n),H(n)),Xe(i,this.hit)||(this.hit&&this.handleHitOut(),i&&this.handleHitOver(i))},handleDragEnd:function(){this.handleHitDone(),$e.prototype.handleDragEnd.apply(this,arguments)},handleHitOver:function(e){var t=Xe(e,this.origHit);this.hit=e,this.trigger("hitOver",this.hit,t,this.origHit)},handleHitOut:function(){this.hit&&(this.trigger("hitOut",this.hit),this.handleHitDone(),this.hit=null)},handleHitDone:function(){this.hit&&this.trigger("hitDone",this.hit)},handleInteractionEnd:function(){$e.prototype.handleInteractionEnd.apply(this,arguments),this.origHit=null,this.hit=null,this.component.hitsNotNeeded()},handleScrollEnd:function(){$e.prototype.handleScrollEnd.apply(this,arguments),this.isDragging&&(this.component.releaseHits(),this.component.prepareHits())},queryHit:function(e,t){return this.coordAdjust&&(e+=this.coordAdjust.left,t+=this.coordAdjust.top),this.component.queryHit(e,t)}});n.touchMouseIgnoreWait=500;var Je=Fe.extend(Ue,qe,{isTouching:!1,mouseIgnoreDepth:0,handleScrollProxy:null,bind:function(){var t=this;this.listenTo(e(document),{touchstart:this.handleTouchStart,touchcancel:this.handleTouchCancel,touchend:this.handleTouchEnd,mousedown:this.handleMouseDown,mousemove:this.handleMouseMove,mouseup:this.handleMouseUp,click:this.handleClick,selectstart:this.handleSelectStart,contextmenu:this.handleContextMenu}),window.addEventListener("touchmove",this.handleTouchMoveProxy=function(n){t.handleTouchMove(e.Event(n))},{passive:!1}),window.addEventListener("scroll",this.handleScrollProxy=function(n){t.handleScroll(e.Event(n))},!0)},unbind:function(){this.stopListeningTo(e(document)),window.removeEventListener("touchmove",this.handleTouchMoveProxy),window.removeEventListener("scroll",this.handleScrollProxy,!0)},handleTouchStart:function(e){this.stopTouch(e,!0),this.isTouching=!0,this.trigger("touchstart",e)},handleTouchMove:function(e){this.isTouching&&this.trigger("touchmove",e)},handleTouchCancel:function(e){this.isTouching&&(this.trigger("touchcancel",e),this.stopTouch(e))},handleTouchEnd:function(e){this.stopTouch(e)},handleMouseDown:function(e){this.shouldIgnoreMouse()||this.trigger("mousedown",e)},handleMouseMove:function(e){this.shouldIgnoreMouse()||this.trigger("mousemove",e)},handleMouseUp:function(e){this.shouldIgnoreMouse()||this.trigger("mouseup",e)},handleClick:function(e){this.shouldIgnoreMouse()||this.trigger("click",e)},handleSelectStart:function(e){this.trigger("selectstart",e)},handleContextMenu:function(e){this.trigger("contextmenu",e)},handleScroll:function(e){this.trigger("scroll",e)},stopTouch:function(e,t){this.isTouching&&(this.isTouching=!1,this.trigger("touchend",e),t||this.startTouchMouseIgnore())},startTouchMouseIgnore:function(){var e=this,t=n.touchMouseIgnoreWait;t&&(this.mouseIgnoreDepth++,setTimeout(function(){e.mouseIgnoreDepth--},t))},shouldIgnoreMouse:function(){return this.isTouching||Boolean(this.mouseIgnoreDepth)}});!function(){var e=null,t=0;Je.get=function(){return e||(e=new Je,e.bind()),e},Je.needed=function(){Je.get(),t++},Je.unneeded=function(){t--,t||(e.unbind(),e=null)}}();var et=Fe.extend(Ue,{options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,y0:null,x0:null,topDelta:null,leftDelta:null,isFollowing:!1,isHidden:!1,isAnimating:!1,constructor:function(t,n){this.options=n=n||{},this.sourceEl=t,this.parentEl=n.parentEl?e(n.parentEl):t.parent()},start:function(t){this.isFollowing||(this.isFollowing=!0,this.y0=H(t),this.x0=C(t),this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),R(t)?this.listenTo(e(document),"touchmove",this.handleMove):this.listenTo(e(document),"mousemove",this.handleMove))},stop:function(t,n){function s(){i.isAnimating=!1,i.removeElement(),i.top0=i.left0=null,n&&n()}var i=this,r=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,this.stopListeningTo(e(document)),t&&r&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:r,complete:s})):s())},getEl:function(){var e=this.el;return e||(e=this.el=this.sourceEl.clone().addClass(this.options.additionalClass||"").css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}),e.addClass("fc-unselectable"),e.appendTo(this.parentEl)),e},removeElement:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var e,t;this.getEl(),null===this.top0&&(e=this.sourceEl.offset(),t=this.el.offsetParent().offset(),this.top0=e.top-t.top,this.left0=e.left-t.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},handleMove:function(e){this.topDelta=H(e)-this.y0,this.leftDelta=C(e)-this.x0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),tt=n.Grid=Fe.extend(Ue,{hasDayInteractions:!0,view:null,isRTL:null,start:null,end:null,el:null,elsByFill:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,minResizeDuration:null,largeUnit:null,dayClickListener:null,daySelectListener:null,segDragListener:null,segResizeListener:null,externalDragListener:null,constructor:function(e){this.view=e,this.isRTL=e.opt("isRTL"),this.elsByFill={},this.dayClickListener=this.buildDayClickListener(),this.daySelectListener=this.buildDaySelectListener()},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return!0},computeDisplayEventEnd:function(){return!0},setRange:function(e){this.start=e.start.clone(),this.end=e.end.clone(),this.rangeUpdated(),this.processRangeOptions()},rangeUpdated:function(){},processRangeOptions:function(){var t,n,e=this.view;this.eventTimeFormat=e.opt("eventTimeFormat")||e.opt("timeFormat")||this.computeEventTimeFormat(),t=e.opt("displayEventTime"),null==t&&(t=this.computeDisplayEventTime()),n=e.opt("displayEventEnd"),null==n&&(n=this.computeDisplayEventEnd()),this.displayEventTime=t,this.displayEventEnd=n},spanToSegs:function(e){},diffDates:function(e,t){return this.largeUnit?Y(e,t,this.largeUnit):_(e,t)},hitsNeededDepth:0,hitsNeeded:function(){this.hitsNeededDepth++||this.prepareHits()},hitsNotNeeded:function(){this.hitsNeededDepth&&!--this.hitsNeededDepth&&this.releaseHits()},prepareHits:function(){},releaseHits:function(){},queryHit:function(e,t){},getSafeHitSpan:function(e){var t=this.getHitSpan(e);return ne(t,this.view.activeRange)?t:null},getHitSpan:function(e){},getHitEl:function(e){},setElement:function(e){this.el=e,this.hasDayInteractions&&(x(e),this.bindDayHandler("touchstart",this.dayTouchStart),this.bindDayHandler("mousedown",this.dayMousedown)),this.bindSegHandlers(),this.bindGlobalHandlers()},bindDayHandler:function(t,n){var i=this;this.el.on(t,function(t){return e(t.target).is(i.segSelector+","+i.segSelector+" *,.fc-more,a[data-goto]")?void 0:n.call(i,t)})},removeElement:function(){this.unbindGlobalHandlers(),this.clearDragListeners(),this.el.remove()},renderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},bindGlobalHandlers:function(){this.listenTo(e(document),{dragstart:this.externalDragStart,sortstart:this.externalDragStart})},unbindGlobalHandlers:function(){this.stopListeningTo(e(document))},dayMousedown:function(e){var t=this.view;Je.get().shouldIgnoreMouse()||(this.dayClickListener.startInteraction(e),t.opt("selectable")&&this.daySelectListener.startInteraction(e,{distance:t.opt("selectMinDistance")}))},dayTouchStart:function(e){var n,t=this.view;t.isSelected||t.selectedEvent||(n=t.opt("selectLongPressDelay"),null==n&&(n=t.opt("longPressDelay")),this.dayClickListener.startInteraction(e),t.opt("selectable")&&this.daySelectListener.startInteraction(e,{delay:n}))},buildDayClickListener:function(){var n,e=this,t=this.view,i=new Qe(this,{scroll:t.opt("dragScroll"),interactionStart:function(){n=i.origHit},hitOver:function(e,t,i){t||(n=null)},hitOut:function(){n=null},interactionEnd:function(i,r){var s;!r&&n&&(s=e.getSafeHitSpan(n),s&&t.triggerDayClick(s,e.getHitEl(n),i))}});return i.shouldCancelTouchScroll=!1,i.scrollAlwaysKills=!0,i},buildDaySelectListener:function(){var n,e=this,t=this.view,i=new Qe(this,{scroll:t.opt("dragScroll"),interactionStart:function(){n=null},dragStart:function(){t.unselect()},hitOver:function(t,i,r){var s,a;r&&(s=e.getSafeHitSpan(r),a=e.getSafeHitSpan(t),n=s&&a?e.computeSelection(s,a):null,n?e.renderSelection(n):n===!1&&l())},hitOut:function(){n=null,e.unrenderSelection()},hitDone:function(){u()},interactionEnd:function(e,i){!i&&n&&t.reportSelection(n,e)}});return i},clearDragListeners:function(){this.dayClickListener.endInteraction(),this.daySelectListener.endInteraction(),this.segDragListener&&this.segDragListener.endInteraction(),this.segResizeListener&&this.segResizeListener.endInteraction(),this.externalDragListener&&this.externalDragListener.endInteraction()},renderEventLocationHelper:function(e,t){var n=this.fabricateHelperEvent(e,t);return this.renderHelper(n,t)},fabricateHelperEvent:function(e,t){var n=t?ce(t.event):{};return n.start=e.start.clone(),n.end=e.end?e.end.clone():null,n.allDay=null,this.view.calendar.normalizeEventDates(n),n.className=(n.className||[]).concat("fc-helper"),t||(n.editable=!1),n},renderHelper:function(e,t){},unrenderHelper:function(){},renderSelection:function(e){this.renderHighlight(e)},unrenderSelection:function(){this.unrenderHighlight()},computeSelection:function(e,t){var n=this.computeSelectionSpan(e,t);return n&&!this.view.calendar.isSelectionSpanAllowed(n)?!1:n},computeSelectionSpan:function(e,t){var n=[e.start,e.end,t.start,t.end];return n.sort(Ee),{start:n[0].clone(),end:n[3].clone()}},renderHighlight:function(e){this.renderFill("highlight",this.spanToSegs(e))},unrenderHighlight:function(){this.unrenderFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderBusinessHours:function(){},unrenderBusinessHours:function(){},getNowIndicatorUnit:function(){},renderNowIndicator:function(e){},unrenderNowIndicator:function(){},renderFill:function(e,t){},unrenderFill:function(e){var t=this.elsByFill[e];t&&(t.remove(),delete this.elsByFill[e])},renderFillSegEls:function(t,n){var o,i=this,r=this[t+"SegEl"],s="",a=[];if(n.length){for(o=0;o<n.length;o++)s+=this.fillSegHtml(t,n[o]);e(s).each(function(t,s){var o=n[t],l=e(s);r&&(l=r.call(i,o,l)),l&&(l=e(l),l.is(i.fillSegTag)&&(o.el=l,a.push(o)))})}return a},fillSegTag:"div",fillSegHtml:function(e,t){var n=this[e+"SegClasses"],i=this[e+"SegCss"],r=n?n.call(this,t):[],s=we(i?i.call(this,t):{});return"<"+this.fillSegTag+(r.length?' class="'+r.join(" ")+'"':"")+(s?' style="'+s+'"':"")+" />"},getDayClasses:function(e,t){var r,n=this.view,i=[];return ee(e,n.activeRange)?(i.push("fc-"+O[e.day()]),1==n.currentRangeAs("months")&&e.month()!=n.currentRange.start.month()&&i.push("fc-other-month"),r=n.calendar.getNow(),e.isSame(r,"day")?(i.push("fc-today"),t!==!0&&i.push(n.highlightStateClass)):r>e?i.push("fc-past"):i.push("fc-future")):i.push("fc-disabled-day"),i}});tt.mixin({segSelector:".fc-event-container > *",mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,isDraggingExternal:!1,segs:null,renderEvents:function(e){var i,t=[],n=[];for(i=0;i<e.length;i++)(it(e[i])?t:n).push(e[i]);this.segs=[].concat(this.renderBgEvents(t),this.renderFgEvents(n))},renderBgEvents:function(e){var t=this.eventsToSegs(e);return this.renderBgSegs(t)||t},renderFgEvents:function(e){var t=this.eventsToSegs(e);return this.renderFgSegs(t)||t},unrenderEvents:function(){this.handleSegMouseout(),this.clearDragListeners(),this.unrenderFgSegs(),this.unrenderBgSegs(),this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(e){},unrenderFgSegs:function(){},renderFgSegEls:function(t,n){var a,i=this.view,r="",s=[];if(t.length){for(a=0;a<t.length;a++)r+=this.fgSegHtml(t[a],n);e(r).each(function(n,r){var a=t[n],o=i.resolveEventEl(a.event,e(r));o&&(o.data("fc-seg",a),a.el=o,s.push(a))})}return s},fgSegHtml:function(e,t){},renderBgSegs:function(e){return this.renderFill("bgEvent",e)},unrenderBgSegs:function(){this.unrenderFill("bgEvent")},bgEventSegEl:function(e,t){return this.view.resolveEventEl(e.event,t)},bgEventSegClasses:function(e){var t=e.event,n=t.source||{};return["fc-bgevent"].concat(t.className,n.className||[])},bgEventSegCss:function(e){return{"background-color":this.getSegSkinCss(e)["background-color"]}},businessHoursSegClasses:function(e){return["fc-nonbusiness","fc-bgevent"]},buildBusinessHourSegs:function(e,t){return this.eventsToSegs(this.buildBusinessHourEvents(e,t))},buildBusinessHourEvents:function(t,n){var r,i=this.view.calendar;return null==n&&(n=i.opt("businessHours")),r=i.computeBusinessHourEvents(t,n),!r.length&&n&&(r=[e.extend({},Nt,{start:this.view.activeRange.end,end:this.view.activeRange.end,dow:null})]),r},bindSegHandlers:function(){this.bindSegHandlersToEl(this.el)},bindSegHandlersToEl:function(e){this.bindSegHandlerToEl(e,"touchstart",this.handleSegTouchStart),this.bindSegHandlerToEl(e,"mouseenter",this.handleSegMouseover),this.bindSegHandlerToEl(e,"mouseleave",this.handleSegMouseout),this.bindSegHandlerToEl(e,"mousedown",this.handleSegMousedown),this.bindSegHandlerToEl(e,"click",this.handleSegClick)},bindSegHandlerToEl:function(t,n,i){var r=this;t.on(n,this.segSelector,function(t){var n=e(this).data("fc-seg");return!n||r.isDraggingSeg||r.isResizingSeg?void 0:i.call(r,n,t)})},handleSegClick:function(e,t){var n=this.view.publiclyTrigger("eventClick",e.el[0],e.event,t);n===!1&&t.preventDefault()},handleSegMouseover:function(e,t){Je.get().shouldIgnoreMouse()||this.mousedOverSeg||(this.mousedOverSeg=e,this.view.isEventResizable(e.event)&&e.el.addClass("fc-allow-mouse-resize"),this.view.publiclyTrigger("eventMouseover",e.el[0],e.event,t))},handleSegMouseout:function(e,t){t=t||{},this.mousedOverSeg&&(e=e||this.mousedOverSeg,this.mousedOverSeg=null,this.view.isEventResizable(e.event)&&e.el.removeClass("fc-allow-mouse-resize"),this.view.publiclyTrigger("eventMouseout",e.el[0],e.event,t))},handleSegMousedown:function(e,t){var n=this.startSegResize(e,t,{distance:5});!n&&this.view.isEventDraggable(e.event)&&this.buildSegDragListener(e).startInteraction(t,{distance:5})},handleSegTouchStart:function(e,t){var l,u,n=this.view,i=e.event,r=n.isEventSelected(i),s=n.isEventDraggable(i),a=n.isEventResizable(i),o=!1;r&&a&&(o=this.startSegResize(e,t)),o||!s&&!a||(u=n.opt("eventLongPressDelay"),null==u&&(u=n.opt("longPressDelay")),l=s?this.buildSegDragListener(e):this.buildSegSelectListener(e),l.startInteraction(t,{delay:r?0:u}))},startSegResize:function(t,n,i){return e(n.target).is(".fc-resizer")?(this.buildSegResizeListener(t,e(n.target).is(".fc-start-resizer")).startInteraction(n,i),!0):!1},buildSegDragListener:function(e){var s,a,o,t=this,n=this.view,i=e.el,r=e.event;if(this.segDragListener)return this.segDragListener;var h=this.segDragListener=new Qe(n,{scroll:n.opt("dragScroll"),subjectEl:i,subjectCenter:!0,interactionStart:function(i){e.component=t,s=!1,a=new et(e.el,{additionalClass:"fc-dragging",parentEl:n.el,opacity:h.isTouch?null:n.opt("dragOpacity"),revertDuration:n.opt("dragRevertDuration"),zIndex:2}),a.hide(),a.start(i)},dragStart:function(i){h.isTouch&&!n.isEventSelected(r)&&n.selectEvent(r),s=!0,t.handleSegMouseout(e,i),t.segDragStart(e,i),n.hideEvent(r)},hitOver:function(i,s,u){var d,f,v,c=!0;e.hit&&(u=e.hit),d=u.component.getSafeHitSpan(u),f=i.component.getSafeHitSpan(i),d&&f?(o=t.computeEventDrop(d,f,r),c=o&&t.isEventLocationAllowed(o,r)):c=!1,c||(o=null,l()),o&&(v=n.renderDrag(o,e))?(v.addClass("fc-dragging"),h.isTouch||t.applyDragOpacity(v),a.hide()):a.show(),s&&(o=null)},hitOut:function(){n.unrenderDrag(),a.show(),o=null},hitDone:function(){u()},interactionEnd:function(l){delete e.component,a.stop(!o,function(){s&&(n.unrenderDrag(),t.segDragStop(e,l)),o?n.reportSegDrop(e,o,t.largeUnit,i,l):n.showEvent(r)}),t.segDragListener=null}});return h},buildSegSelectListener:function(e){var t=this,n=this.view,i=e.event;if(this.segDragListener)return this.segDragListener;var r=this.segDragListener=new $e({dragStart:function(e){r.isTouch&&!n.isEventSelected(i)&&n.selectEvent(i)},interactionEnd:function(e){t.segDragListener=null}});return r},segDragStart:function(e,t){this.isDraggingSeg=!0,this.view.publiclyTrigger("eventDragStart",e.el[0],e.event,t,{})},segDragStop:function(e,t){this.isDraggingSeg=!1,this.view.publiclyTrigger("eventDragStop",e.el[0],e.event,t,{})},computeEventDrop:function(e,t,n){var a,o,i=this.view.calendar,r=e.start,s=t.start;return r.hasTime()===s.hasTime()?(a=this.diffDates(s,r),n.allDay&&ae(a)?(o={start:n.start.clone(),end:i.getEventEnd(n),allDay:!1},i.normalizeEventTimes(o)):o=nt(n),o.start.add(a),o.end&&o.end.add(a)):o={start:s.clone(),end:null,allDay:!s.hasTime()},o},applyDragOpacity:function(e){var t=this.view.opt("dragOpacity");null!=t&&e.css("opacity",t)},externalDragStart:function(t,n){var r,s,i=this.view;i.opt("droppable")&&(r=e((n?n.item:null)||t.target),s=i.opt("dropAccept"),(e.isFunction(s)?s.call(r[0],r):r.is(s))&&(this.isDraggingExternal||this.listenToExternalDrag(r,t,n)))},listenToExternalDrag:function(e,t,n){var a,i=this,r=this.view,s=lt(e),o=i.externalDragListener=new Qe(this,{interactionStart:function(){i.isDraggingExternal=!0},hitOver:function(e){var t=!0,n=e.component.getSafeHitSpan(e);n?(a=i.computeExternalDrop(n,s),t=a&&i.isExternalLocationAllowed(a,s.eventProps)):t=!1,t||(a=null,l()),a&&i.renderDrag(a)},hitOut:function(){a=null},hitDone:function(){u(),i.unrenderDrag()},interactionEnd:function(t){a&&r.reportExternalDrop(s,a,e,t,n),i.isDraggingExternal=!1,i.externalDragListener=null}});o.startDrag(t)},computeExternalDrop:function(e,t){var n=this.view.calendar,i={start:n.applyTimezone(e.start),end:null};return t.startTime&&!i.start.hasTime()&&i.start.time(t.startTime),t.duration&&(i.end=i.start.clone().add(t.duration)),i},renderDrag:function(e,t){},unrenderDrag:function(){},buildSegResizeListener:function(e,t){var h,c,n=this,i=this.view,r=i.calendar,s=e.el,a=e.event,o=r.getEventEnd(a),d=this.segResizeListener=new Qe(this,{scroll:i.opt("dragScroll"),subjectEl:s,interactionStart:function(){h=!1},dragStart:function(t){h=!0,n.handleSegMouseout(e,t),n.segResizeStart(e,t)},hitOver:function(r,s,u){var h=!0,d=n.getSafeHitSpan(u),f=n.getSafeHitSpan(r);d&&f?(c=t?n.computeEventStartResize(d,f,a):n.computeEventEndResize(d,f,a),h=c&&n.isEventLocationAllowed(c,a)):h=!1,h?c.start.isSame(a.start.clone().stripZone())&&c.end.isSame(o.clone().stripZone())&&(c=null):(c=null,l()),c&&(i.hideEvent(a),n.renderEventResize(c,e))},hitOut:function(){c=null,i.showEvent(a)},hitDone:function(){n.unrenderEventResize(),u()},interactionEnd:function(t){h&&n.segResizeStop(e,t),c?i.reportSegResize(e,c,n.largeUnit,s,t):i.showEvent(a),n.segResizeListener=null}});return d},segResizeStart:function(e,t){this.isResizingSeg=!0,this.view.publiclyTrigger("eventResizeStart",e.el[0],e.event,t,{})},segResizeStop:function(e,t){this.isResizingSeg=!1,this.view.publiclyTrigger("eventResizeStop",e.el[0],e.event,t,{})},computeEventStartResize:function(e,t,n){return this.computeEventResize("start",e,t,n)},computeEventEndResize:function(e,t,n){return this.computeEventResize("end",e,t,n)},computeEventResize:function(e,t,n,i){var a,o,r=this.view.calendar,s=this.diffDates(n[e],t[e]);return a={start:i.start.clone(),end:r.getEventEnd(i),allDay:i.allDay},a.allDay&&ae(s)&&(a.allDay=!1,r.normalizeEventTimes(a)),a[e].add(s),a.start.isBefore(a.end)||(o=this.minResizeDuration||(i.allDay?r.defaultAllDayEventDuration:r.defaultTimedEventDuration),"start"==e?a.start=a.end.clone().subtract(o):a.end=a.start.clone().add(o)),a},renderEventResize:function(e,t){},unrenderEventResize:function(){},getEventTimeText:function(e,t,n){return null==t&&(t=this.eventTimeFormat),null==n&&(n=this.displayEventEnd),this.displayEventTime&&e.start.hasTime()?n&&e.end?this.view.formatRange(e,t):e.start.format(t):""},getSegClasses:function(e,t,n){var i=this.view,r=["fc-event",e.isStart?"fc-start":"fc-not-start",e.isEnd?"fc-end":"fc-not-end"].concat(this.getSegCustomClasses(e));return t&&r.push("fc-draggable"),n&&r.push("fc-resizable"),i.isEventSelected(e.event)&&r.push("fc-selected"),r},getSegCustomClasses:function(e){var t=e.event;return[].concat(t.className,t.source?t.source.className:[])},getSegSkinCss:function(e){return{"background-color":this.getSegBackgroundColor(e),"border-color":this.getSegBorderColor(e),color:this.getSegTextColor(e)}},getSegBackgroundColor:function(e){return e.event.backgroundColor||e.event.color||this.getSegDefaultBackgroundColor(e)},getSegDefaultBackgroundColor:function(e){var t=e.event.source||{};return t.backgroundColor||t.color||this.view.opt("eventBackgroundColor")||this.view.opt("eventColor")},getSegBorderColor:function(e){return e.event.borderColor||e.event.color||this.getSegDefaultBorderColor(e)},getSegDefaultBorderColor:function(e){var t=e.event.source||{};return t.borderColor||t.color||this.view.opt("eventBorderColor")||this.view.opt("eventColor")},getSegTextColor:function(e){return e.event.textColor||this.getSegDefaultTextColor(e);
},getSegDefaultTextColor:function(e){var t=e.event.source||{};return t.textColor||this.view.opt("eventTextColor")},isEventLocationAllowed:function(e,t){if(this.isEventLocationInRange(e)){var r,n=this.view.calendar,i=this.eventToSpans(e);if(i.length){for(r=0;r<i.length;r++)if(!n.isEventSpanAllowed(i[r],t))return!1;return!0}}return!1},isExternalLocationAllowed:function(e,t){if(this.isEventLocationInRange(e)){var r,n=this.view.calendar,i=this.eventToSpans(e);if(i.length){for(r=0;r<i.length;r++)if(!n.isExternalSpanAllowed(i[r],e,t))return!1;return!0}}return!1},isEventLocationInRange:function(e){return ne(this.eventToRawRange(e),this.view.validRange)},eventToSegs:function(e){return this.eventsToSegs([e])},eventToSpans:function(e){var t=this.eventToRange(e);return t?this.eventRangeToSpans(t,e):[]},eventsToSegs:function(t,n){var i=this,r=at(t),s=[];return e.each(r,function(e,t){var o,l,r=[],a=[];for(l=0;l<t.length;l++)o=i.eventToRange(t[l]),o&&(a.push(o),r.push(t[l]));if(rt(t[0]))for(a=i.invertRanges(a),l=0;l<a.length;l++)s.push.apply(s,i.eventRangeToSegs(a[l],t[0],n));else for(l=0;l<a.length;l++)s.push.apply(s,i.eventRangeToSegs(a[l],r[l],n))}),s},eventToRange:function(e){return this.refineRawEventRange(this.eventToRawRange(e))},refineRawEventRange:function(e){var t=this.view,n=t.calendar,i=G(e,t.activeRange);return i?(n.localizeMoment(i.start),n.localizeMoment(i.end),i):void 0},eventToRawRange:function(e){var t=this.view.calendar,n=e.start.clone().stripZone(),i=(e.end?e.end.clone():t.getDefaultEventEnd(null!=e.allDay?e.allDay:!e.start.hasTime(),e.start)).stripZone();return{start:n,end:i}},eventRangeToSegs:function(e,t,n){var s,i=this.eventRangeToSpans(e,t),r=[];for(s=0;s<i.length;s++)r.push.apply(r,this.eventSpanToSegs(i[s],t,n));return r},eventRangeToSpans:function(t,n){return[e.extend({},t)]},eventSpanToSegs:function(e,t,n){var r,s,i=n?n(e):this.spanToSegs(e);for(r=0;r<i.length;r++)s=i[r],e.isStart||(s.isStart=!1),e.isEnd||(s.isEnd=!1),s.event=t,s.eventStartMS=+e.start,s.eventDurationMS=e.end-e.start;return i},invertRanges:function(e){var a,o,t=this.view,n=t.activeRange.start.clone(),i=t.activeRange.end.clone(),r=[],s=n;for(e.sort(ot),a=0;a<e.length;a++)o=e[a],o.start>s&&r.push({start:s,end:o.start}),o.end>s&&(s=o.end);return i>s&&r.push({start:s,end:i}),r},sortEventSegs:function(e){e.sort(Te(this,"compareEventSegs"))},compareEventSegs:function(e,t){return e.eventStartMS-t.eventStartMS||t.eventDurationMS-e.eventDurationMS||t.event.allDay-e.event.allDay||F(e.event,t.event,this.view.eventOrderSpecs)}}),n.pluckEventDateProps=nt,n.isBgEvent=it,n.dataAttrPrefix="";var ut=n.DayTableMixin={breakOnWeeks:!1,dayDates:null,dayIndices:null,daysPerRow:null,rowCnt:null,colCnt:null,colHeadFormat:null,updateDayTable:function(){for(var s,a,o,e=this.view,t=this.start.clone(),n=-1,i=[],r=[];t.isBefore(this.end);)e.isHiddenDay(t)?i.push(n+.5):(n++,i.push(n),r.push(t.clone())),t.add(1,"days");if(this.breakOnWeeks){for(a=r[0].day(),s=1;s<r.length&&r[s].day()!=a;s++);o=Math.ceil(r.length/s)}else o=1,s=r.length;this.dayDates=r,this.dayIndices=i,this.daysPerRow=s,this.rowCnt=o,this.updateDayTableCols()},updateDayTableCols:function(){this.colCnt=this.computeColCnt(),this.colHeadFormat=this.view.opt("columnFormat")||this.computeColHeadFormat()},computeColCnt:function(){return this.daysPerRow},getCellDate:function(e,t){return this.dayDates[this.getCellDayIndex(e,t)].clone()},getCellRange:function(e,t){var n=this.getCellDate(e,t),i=n.clone().add(1,"days");return{start:n,end:i}},getCellDayIndex:function(e,t){return e*this.daysPerRow+this.getColDayIndex(t)},getColDayIndex:function(e){return this.isRTL?this.colCnt-1-e:e},getDateDayIndex:function(e){var t=this.dayIndices,n=e.diff(this.start,"days");return 0>n?t[0]-1:n>=t.length?t[t.length-1]+1:t[n]},computeColHeadFormat:function(){return this.rowCnt>1||this.colCnt>10?"ddd":this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},sliceRangeByRow:function(e){var a,o,l,u,h,t=this.daysPerRow,n=this.view.computeDayRange(e),i=this.getDateDayIndex(n.start),r=this.getDateDayIndex(n.end.clone().subtract(1,"days")),s=[];for(a=0;a<this.rowCnt;a++)o=a*t,l=o+t-1,u=Math.max(i,o),h=Math.min(r,l),u=Math.ceil(u),h=Math.floor(h),h>=u&&s.push({row:a,firstRowDayIndex:u-o,lastRowDayIndex:h-o,isStart:u===i,isEnd:h===r});return s},sliceRangeByDay:function(e){var a,o,l,u,h,c,t=this.daysPerRow,n=this.view.computeDayRange(e),i=this.getDateDayIndex(n.start),r=this.getDateDayIndex(n.end.clone().subtract(1,"days")),s=[];for(a=0;a<this.rowCnt;a++)for(o=a*t,l=o+t-1,u=o;l>=u;u++)h=Math.max(i,u),c=Math.min(r,u),h=Math.ceil(h),c=Math.floor(c),c>=h&&s.push({row:a,firstRowDayIndex:h-o,lastRowDayIndex:c-o,isStart:h===i,isEnd:c===r});return s},renderHeadHtml:function(){var e=this.view;return'<div class="fc-row '+e.widgetHeaderClass+'"><table><thead>'+this.renderHeadTrHtml()+"</thead></table></div>"},renderHeadIntroHtml:function(){return this.renderIntroHtml()},renderHeadTrHtml:function(){return"<tr>"+(this.isRTL?"":this.renderHeadIntroHtml())+this.renderHeadDateCellsHtml()+(this.isRTL?this.renderHeadIntroHtml():"")+"</tr>"},renderHeadDateCellsHtml:function(){var t,n,e=[];for(t=0;t<this.colCnt;t++)n=this.getCellDate(0,t),e.push(this.renderHeadDateCellHtml(n));return e.join("")},renderHeadDateCellHtml:function(e,t,n){var i=this.view,r=ee(e,i.activeRange),s=["fc-day-header",i.widgetHeaderClass],a=me(e.format(this.colHeadFormat));return 1===this.rowCnt?s=s.concat(this.getDayClasses(e,!0)):s.push("fc-"+O[e.day()]),'<th class="'+s.join(" ")+'"'+(1===(r&&this.rowCnt)?' data-date="'+e.format("YYYY-MM-DD")+'"':"")+(t>1?' colspan="'+t+'"':"")+(n?" "+n:"")+">"+(r?i.buildGotoAnchorHtml({date:e,forceOff:this.rowCnt>1||1===this.colCnt},a):a)+"</th>"},renderBgTrHtml:function(e){return"<tr>"+(this.isRTL?"":this.renderBgIntroHtml(e))+this.renderBgCellsHtml(e)+(this.isRTL?this.renderBgIntroHtml(e):"")+"</tr>"},renderBgIntroHtml:function(e){return this.renderIntroHtml()},renderBgCellsHtml:function(e){var n,i,t=[];for(n=0;n<this.colCnt;n++)i=this.getCellDate(e,n),t.push(this.renderBgCellHtml(i));return t.join("")},renderBgCellHtml:function(e,t){var n=this.view,i=ee(e,n.activeRange),r=this.getDayClasses(e);return r.unshift("fc-day",n.widgetContentClass),'<td class="'+r.join(" ")+'"'+(i?' data-date="'+e.format("YYYY-MM-DD")+'"':"")+(t?" "+t:"")+"></td>"},renderIntroHtml:function(){},bookendCells:function(e){var t=this.renderIntroHtml();t&&(this.isRTL?e.append(t):e.prepend(t))}},ht=n.DayGrid=tt.extend(ut,{numbersVisible:!1,bottomCoordPadding:0,rowEls:null,cellEls:null,helperEls:null,rowCoordCache:null,colCoordCache:null,renderDates:function(e){var s,a,t=this.view,n=this.rowCnt,i=this.colCnt,r="";for(s=0;n>s;s++)r+=this.renderDayRowHtml(s,e);for(this.el.html(r),this.rowEls=this.el.find(".fc-row"),this.cellEls=this.el.find(".fc-day, .fc-disabled-day"),this.rowCoordCache=new Ze({els:this.rowEls,isVertical:!0}),this.colCoordCache=new Ze({els:this.cellEls.slice(0,this.colCnt),isHorizontal:!0}),s=0;n>s;s++)for(a=0;i>a;a++)t.publiclyTrigger("dayRender",null,this.getCellDate(s,a),this.getCellEl(s,a))},unrenderDates:function(){this.removeSegPopover()},renderBusinessHours:function(){var e=this.buildBusinessHourSegs(!0);this.renderFill("businessHours",e,"bgevent")},unrenderBusinessHours:function(){this.unrenderFill("businessHours")},renderDayRowHtml:function(e,t){var n=this.view,i=["fc-row","fc-week",n.widgetContentClass];return t&&i.push("fc-rigid"),'<div class="'+i.join(" ")+'"><div class="fc-bg"><table>'+this.renderBgTrHtml(e)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.renderNumberTrHtml(e)+"</thead>":"")+"</table></div></div>"},renderNumberTrHtml:function(e){return"<tr>"+(this.isRTL?"":this.renderNumberIntroHtml(e))+this.renderNumberCellsHtml(e)+(this.isRTL?this.renderNumberIntroHtml(e):"")+"</tr>"},renderNumberIntroHtml:function(e){return this.renderIntroHtml()},renderNumberCellsHtml:function(e){var n,i,t=[];for(n=0;n<this.colCnt;n++)i=this.getCellDate(e,n),t.push(this.renderNumberCellHtml(i));return t.join("")},renderNumberCellHtml:function(e){var s,a,t=this.view,n="",i=ee(e,t.activeRange),r=t.dayNumbersVisible&&i;return r||t.cellWeekNumbersVisible?(s=this.getDayClasses(e),s.unshift("fc-day-top"),t.cellWeekNumbersVisible&&(a="ISO"===e._locale._fullCalendar_weekCalc?1:e._locale.firstDayOfWeek()),n+='<td class="'+s.join(" ")+'"'+(i?' data-date="'+e.format()+'"':"")+">",t.cellWeekNumbersVisible&&e.day()==a&&(n+=t.buildGotoAnchorHtml({date:e,type:"week"},{"class":"fc-week-number"},e.format("w"))),r&&(n+=t.buildGotoAnchorHtml(e,{"class":"fc-day-number"},e.date())),n+="</td>"):"<td/>"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return 1==this.colCnt},rangeUpdated:function(){this.updateDayTable()},spanToSegs:function(e){var n,i,t=this.sliceRangeByRow(e);for(n=0;n<t.length;n++)i=t[n],this.isRTL?(i.leftCol=this.daysPerRow-1-i.lastRowDayIndex,i.rightCol=this.daysPerRow-1-i.firstRowDayIndex):(i.leftCol=i.firstRowDayIndex,i.rightCol=i.lastRowDayIndex);return t},prepareHits:function(){this.colCoordCache.build(),this.rowCoordCache.build(),this.rowCoordCache.bottoms[this.rowCnt-1]+=this.bottomCoordPadding},releaseHits:function(){this.colCoordCache.clear(),this.rowCoordCache.clear()},queryHit:function(e,t){if(this.colCoordCache.isLeftInBounds(e)&&this.rowCoordCache.isTopInBounds(t)){var n=this.colCoordCache.getHorizontalIndex(e),i=this.rowCoordCache.getVerticalIndex(t);if(null!=i&&null!=n)return this.getCellHit(i,n)}},getHitSpan:function(e){return this.getCellRange(e.row,e.col)},getHitEl:function(e){return this.getCellEl(e.row,e.col)},getCellHit:function(e,t){return{row:e,col:t,component:this,left:this.colCoordCache.getLeftOffset(t),right:this.colCoordCache.getRightOffset(t),top:this.rowCoordCache.getTopOffset(e),bottom:this.rowCoordCache.getBottomOffset(e)}},getCellEl:function(e,t){return this.cellEls.eq(e*this.colCnt+t)},renderDrag:function(e,t){var i,n=this.eventToSpans(e);for(i=0;i<n.length;i++)this.renderHighlight(n[i]);return t&&t.component!==this?this.renderEventLocationHelper(e,t):void 0},unrenderDrag:function(){this.unrenderHighlight(),this.unrenderHelper()},renderEventResize:function(e,t){var i,n=this.eventToSpans(e);for(i=0;i<n.length;i++)this.renderHighlight(n[i]);return this.renderEventLocationHelper(e,t)},unrenderEventResize:function(){this.unrenderHighlight(),this.unrenderHelper()},renderHelper:function(t,n){var s,i=[],r=this.eventToSegs(t);return r=this.renderFgSegEls(r),s=this.renderSegRows(r),this.rowEls.each(function(t,r){var l,a=e(r),o=e('<div class="fc-helper-skeleton"><table/></div>');l=n&&n.row===t?n.el.position().top:a.find(".fc-content-skeleton tbody").position().top,o.css("top",l).find("table").append(s[t].tbodyEl),a.append(o),i.push(o[0])}),this.helperEls=e(i)},unrenderHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(t,n,i){var s,a,o,r=[];for(n=this.renderFillSegEls(t,n),s=0;s<n.length;s++)a=n[s],o=this.renderFillRow(t,a,i),this.rowEls.eq(a.row).append(o),r.push(o[0]);return this.elsByFill[t]=e(r),n},renderFillRow:function(t,n,i){var o,l,r=this.colCnt,s=n.leftCol,a=n.rightCol+1;return i=i||t.toLowerCase(),o=e('<div class="fc-'+i+'-skeleton"><table><tr/></table></div>'),l=o.find("tr"),s>0&&l.append('<td colspan="'+s+'"/>'),l.append(n.el.attr("colspan",a-s)),r>a&&l.append('<td colspan="'+(r-a)+'"/>'),this.bookendCells(l),o}});ht.mixin({rowStructs:null,unrenderEvents:function(){this.removeSegPopover(),tt.prototype.unrenderEvents.apply(this,arguments)},getEventSegs:function(){return tt.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(t){var n=e.grep(t,function(e){return e.event.allDay});return tt.prototype.renderBgSegs.call(this,n)},renderFgSegs:function(t){var n;return t=this.renderFgSegEls(t),n=this.rowStructs=this.renderSegRows(t),this.rowEls.each(function(t,i){e(i).find(".fc-content-skeleton > table").append(n[t].tbodyEl)}),t},unrenderFgSegs:function(){for(var t,e=this.rowStructs||[];t=e.pop();)t.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(e){var n,i,t=[];for(n=this.groupSegRows(e),i=0;i<n.length;i++)t.push(this.renderSegRow(i,n[i]));return t},fgSegHtml:function(e,t){var h,c,n=this.view,i=e.event,r=n.isEventDraggable(i),s=!t&&i.allDay&&e.isStart&&n.isEventResizableFromStart(i),a=!t&&i.allDay&&e.isEnd&&n.isEventResizableFromEnd(i),o=this.getSegClasses(e,r,s||a),l=we(this.getSegSkinCss(e)),u="";return o.unshift("fc-day-grid-event","fc-h-event"),e.isStart&&(h=this.getEventTimeText(i),h&&(u='<span class="fc-time">'+me(h)+"</span>")),c='<span class="fc-title">'+(me(i.title||"")||"&nbsp;")+"</span>",'<a class="'+o.join(" ")+'"'+(i.url?' href="'+me(i.url)+'"':"")+(l?' style="'+l+'"':"")+'><div class="fc-content">'+(this.isRTL?c+" "+u:u+" "+c)+"</div>"+(s?'<div class="fc-resizer fc-start-resizer" />':"")+(a?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},renderSegRow:function(t,n){function m(t){for(;t>d;)p=(u[h-1]||[])[d],p?p.attr("rowspan",parseInt(p.attr("rowspan")||1,10)+1):(p=e("<td/>"),f.append(p)),l[h][d]=p,u[h][d]=p,d++}var h,c,d,f,v,g,p,i=this.colCnt,r=this.buildSegLevels(n),s=Math.max(1,r.length),a=e("<tbody/>"),o=[],l=[],u=[];for(h=0;s>h;h++){if(c=r[h],d=0,f=e("<tr/>"),o.push([]),l.push([]),u.push([]),c)for(v=0;v<c.length;v++){for(g=c[v],m(g.leftCol),p=e('<td class="fc-event-container"/>').append(g.el),g.leftCol!=g.rightCol?p.attr("colspan",g.rightCol-g.leftCol+1):u[h][d]=p;d<=g.rightCol;)l[h][d]=p,o[h][d]=g,d++;f.append(p)}m(i),this.bookendCells(f),a.append(f)}return{row:t,tbodyEl:a,cellMatrix:l,segMatrix:o,segLevels:r,segs:n}},buildSegLevels:function(e){var n,i,r,t=[];for(this.sortEventSegs(e),n=0;n<e.length;n++){for(i=e[n],r=0;r<t.length&&ct(i,t[r]);r++);i.level=r,(t[r]||(t[r]=[])).push(i)}for(r=0;r<t.length;r++)t[r].sort(dt);return t},groupSegRows:function(e){var n,t=[];for(n=0;n<this.rowCnt;n++)t.push([]);for(n=0;n<e.length;n++)t[e[n].row].push(e[n]);return t}}),ht.mixin({segPopover:null,popoverSegs:null,removeSegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(e){var n,i,t=this.rowStructs||[];for(n=0;n<t.length;n++)this.unlimitRow(n),i=e?"number"==typeof e?e:this.computeRowLevelLimit(n):!1,i!==!1&&this.limitRow(n,i)},computeRowLevelLimit:function(t){function l(t,n){o=Math.max(o,e(n).outerHeight())}var s,a,o,n=this.rowEls.eq(t),i=n.height(),r=this.rowStructs[t].tbodyEl.children();for(s=0;s<r.length;s++)if(a=r.eq(s).removeClass("fc-limited"),o=0,a.find("> td > :first-child").each(l),a.position().top+o>i)return s;return!1},limitRow:function(t,n){function E(r){for(;r>a;)d=i.getCellSegs(t,a,n),d.length&&(g=l[n-1][a],b=i.renderMoreLink(t,a,d),S=e("<div/>").append(b),g.append(S),s.push(S[0])),a++}var o,l,u,h,c,d,f,v,g,p,m,y,w,S,b,i=this,r=this.rowStructs[t],s=[],a=0;if(n&&n<r.segLevels.length){for(o=r.segLevels[n-1],l=r.cellMatrix,u=r.tbodyEl.children().slice(n).addClass("fc-limited").get(),h=0;h<o.length;h++){for(c=o[h],E(c.leftCol),v=[],f=0;a<=c.rightCol;)d=this.getCellSegs(t,a,n),v.push(d),f+=d.length,a++;if(f){for(g=l[n-1][c.leftCol],p=g.attr("rowspan")||1,m=[],y=0;y<v.length;y++)w=e('<td class="fc-more-cell"/>').attr("rowspan",p),d=v[y],b=this.renderMoreLink(t,c.leftCol+y,[c].concat(d)),S=e("<div/>").append(b),w.append(S),m.push(w[0]),s.push(w[0]);g.addClass("fc-limited").after(e(m)),u.push(g[0])}}E(this.colCnt),r.moreEls=e(s),r.limitedEls=e(u)}},unlimitRow:function(e){var t=this.rowStructs[e];t.moreEls&&(t.moreEls.remove(),t.moreEls=null),t.limitedEls&&(t.limitedEls.removeClass("fc-limited"),t.limitedEls=null)},renderMoreLink:function(t,n,i){var r=this,s=this.view;return e('<a class="fc-more"/>').text(this.getMoreLinkText(i.length)).on("click",function(a){var o=s.opt("eventLimitClick"),l=r.getCellDate(t,n),u=e(this),h=r.getCellEl(t,n),c=r.getCellSegs(t,n),d=r.resliceDaySegs(c,l),f=r.resliceDaySegs(i,l);"function"==typeof o&&(o=s.publiclyTrigger("eventLimitClick",null,{date:l,dayEl:h,moreEl:u,segs:d,hiddenSegs:f},a)),"popover"===o?r.showSegPopover(t,n,u,d):"string"==typeof o&&s.calendar.zoomTo(l,o)})},showSegPopover:function(e,t,n,i){var o,l,r=this,s=this.view,a=n.parent();o=1==this.rowCnt?s.el:this.rowEls.eq(e),l={className:"fc-more-popover",content:this.renderSegPopoverContent(e,t,i),parentEl:this.view.el,top:o.offset().top,autoHide:!0,viewportConstrain:s.opt("popoverViewportConstrain"),hide:function(){if(r.popoverSegs)for(var e,t=0;t<r.popoverSegs.length;++t)e=r.popoverSegs[t],s.publiclyTrigger("eventDestroy",e.event,e.event,e.el);r.segPopover.removeElement(),r.segPopover=null,r.popoverSegs=null}},this.isRTL?l.right=a.offset().left+a.outerWidth()+1:l.left=a.offset().left-1,this.segPopover=new je(l),this.segPopover.show(),this.bindSegHandlersToEl(this.segPopover.el)},renderSegPopoverContent:function(t,n,i){var u,r=this.view,s=r.opt("theme"),a=this.getCellDate(t,n).format(r.opt("dayPopoverFormat")),o=e('<div class="fc-header '+r.widgetHeaderClass+'"><span class="fc-close '+(s?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+me(a)+'</span><div class="fc-clear"/></div><div class="fc-body '+r.widgetContentClass+'"><div class="fc-event-container"></div></div>'),l=o.find(".fc-event-container");for(i=this.renderFgSegEls(i,!0),this.popoverSegs=i,u=0;u<i.length;u++)this.hitsNeeded(),i[u].hit=this.getCellHit(t,n),this.hitsNotNeeded(),l.append(i[u].el);return o},resliceDaySegs:function(t,n){var i=e.map(t,function(e){return e.event}),r=n.clone(),s=r.clone().add(1,"days"),a={start:r,end:s};return t=this.eventsToSegs(i,function(e){var t=G(e,a);return t?[t]:[]}),this.sortEventSegs(t),t},getMoreLinkText:function(e){var t=this.view.opt("eventLimitText");return"function"==typeof t?t(e):"+"+e+" "+t},getCellSegs:function(e,t,n){for(var a,i=this.rowStructs[e].segMatrix,r=n||0,s=[];r<i.length;)a=i[r][t],a&&s.push(a),r++;return s}});var ft=n.TimeGrid=tt.extend(ut,{slotDuration:null,snapDuration:null,snapsPerSlot:null,labelFormat:null,labelInterval:null,colEls:null,slatContainerEl:null,slatEls:null,nowIndicatorEls:null,colCoordCache:null,slatCoordCache:null,constructor:function(){tt.apply(this,arguments),this.processOptions()},renderDates:function(){this.el.html(this.renderHtml()),this.colEls=this.el.find(".fc-day, .fc-disabled-day"),this.slatContainerEl=this.el.find(".fc-slats"),this.slatEls=this.slatContainerEl.find("tr"),this.colCoordCache=new Ze({els:this.colEls,isHorizontal:!0}),this.slatCoordCache=new Ze({els:this.slatEls,isVertical:!0}),this.renderContentSkeleton()},renderHtml:function(){return'<div class="fc-bg"><table>'+this.renderBgTrHtml(0)+'</table></div><div class="fc-slats"><table>'+this.renderSlatRowHtml()+"</table></div>"},renderSlatRowHtml:function(){for(var s,a,o,e=this.view,n=this.isRTL,i="",r=t.duration(+this.view.minTime);r<this.view.maxTime;)s=this.start.clone().time(r),a=De($(r,this.labelInterval)),o='<td class="fc-axis fc-time '+e.widgetContentClass+'" '+e.axisStyleAttr()+">"+(a?"<span>"+me(s.format(this.labelFormat))+"</span>":"")+"</td>",i+='<tr data-time="'+s.format("HH:mm:ss")+'"'+(a?"":' class="fc-minor"')+">"+(n?"":o)+'<td class="'+e.widgetContentClass+'"/>'+(n?o:"")+"</tr>",r.add(this.slotDuration);return i},processOptions:function(){var s,n=this.view,i=n.opt("slotDuration"),r=n.opt("snapDuration");i=t.duration(i),r=r?t.duration(r):i,this.slotDuration=i,this.snapDuration=r,this.snapsPerSlot=i/r,this.minResizeDuration=r,s=n.opt("slotLabelFormat"),e.isArray(s)&&(s=s[s.length-1]),this.labelFormat=s||n.opt("smallTimeFormat"),s=n.opt("slotLabelInterval"),this.labelInterval=s?t.duration(s):this.computeLabelInterval(i)},computeLabelInterval:function(e){var n,i,r;for(n=_t.length-1;n>=0;n--)if(i=t.duration(_t[n]),r=$(i,e),De(r)&&r>1)return i;return t.duration(e)},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return!0},prepareHits:function(){this.colCoordCache.build(),this.slatCoordCache.build()},releaseHits:function(){this.colCoordCache.clear()},queryHit:function(e,t){var n=this.snapsPerSlot,i=this.colCoordCache,r=this.slatCoordCache;if(i.isLeftInBounds(e)&&r.isTopInBounds(t)){var s=i.getHorizontalIndex(e),a=r.getVerticalIndex(t);if(null!=s&&null!=a){var o=r.getTopOffset(a),l=r.getHeight(a),u=(t-o)/l,h=Math.floor(u*n),c=a*n+h,d=o+h/n*l,f=o+(h+1)/n*l;return{col:s,snap:c,component:this,left:i.getLeftOffset(s),right:i.getRightOffset(s),top:d,bottom:f}}}},getHitSpan:function(e){var i,t=this.getCellDate(0,e.col),n=this.computeSnapTime(e.snap);return t.time(n),i=t.clone().add(this.snapDuration),{start:t,end:i}},getHitEl:function(e){return this.colEls.eq(e.col)},rangeUpdated:function(){this.updateDayTable()},computeSnapTime:function(e){return t.duration(this.view.minTime+this.snapDuration*e)},spanToSegs:function(e){var n,t=this.sliceRangeByTimes(e);for(n=0;n<t.length;n++)this.isRTL?t[n].col=this.daysPerRow-1-t[n].dayIndex:t[n].col=t[n].dayIndex;return t},sliceRangeByTimes:function(e){var n,i,r,s,t=[];for(i=0;i<this.daysPerRow;i++)r=this.dayDates[i].clone().time(0),s={start:r.clone().add(this.view.minTime),end:r.clone().add(this.view.maxTime)},n=G(e,s),n&&(n.dayIndex=i,t.push(n));return t},updateSize:function(e){this.slatCoordCache.build(),e&&this.updateSegVerticals([].concat(this.fgSegs||[],this.bgSegs||[],this.businessSegs||[]))},getTotalSlatHeight:function(){return this.slatContainerEl.outerHeight()},computeDateTop:function(e,n){return this.computeTimeTop(t.duration(e-n.clone().stripTime()))},computeTimeTop:function(e){var i,r,t=this.slatEls.length,n=(e-this.view.minTime)/this.slotDuration;return n=Math.max(0,n),n=Math.min(t,n),i=Math.floor(n),i=Math.min(i,t-1),r=n-i,this.slatCoordCache.getTopPosition(i)+this.slatCoordCache.getHeight(i)*r},renderDrag:function(e,t){var n,i;if(t)return this.renderEventLocationHelper(e,t);for(n=this.eventToSpans(e),i=0;i<n.length;i++)this.renderHighlight(n[i])},unrenderDrag:function(){this.unrenderHelper(),this.unrenderHighlight()},renderEventResize:function(e,t){return this.renderEventLocationHelper(e,t)},unrenderEventResize:function(){this.unrenderHelper()},renderHelper:function(e,t){return this.renderHelperSegs(this.eventToSegs(e),t)},unrenderHelper:function(){this.unrenderHelperSegs()},renderBusinessHours:function(){this.renderBusinessSegs(this.buildBusinessHourSegs())},unrenderBusinessHours:function(){this.unrenderBusinessSegs()},getNowIndicatorUnit:function(){return"minute"},renderNowIndicator:function(t){var s,n=this.spanToSegs({start:t,end:t}),i=this.computeDateTop(t,t),r=[];for(s=0;s<n.length;s++)r.push(e('<div class="fc-now-indicator fc-now-indicator-line"></div>').css("top",i).appendTo(this.colContainerEls.eq(n[s].col))[0]);n.length>0&&r.push(e('<div class="fc-now-indicator fc-now-indicator-arrow"></div>').css("top",i).appendTo(this.el.find(".fc-content-skeleton"))[0]),this.nowIndicatorEls=e(r)},unrenderNowIndicator:function(){this.nowIndicatorEls&&(this.nowIndicatorEls.remove(),this.nowIndicatorEls=null)},renderSelection:function(e){this.view.opt("selectHelper")?this.renderEventLocationHelper(e):this.renderHighlight(e)},unrenderSelection:function(){this.unrenderHelper(),this.unrenderHighlight()},renderHighlight:function(e){this.renderHighlightSegs(this.spanToSegs(e))},unrenderHighlight:function(){this.unrenderHighlightSegs()}});ft.mixin({colContainerEls:null,fgContainerEls:null,bgContainerEls:null,helperContainerEls:null,highlightContainerEls:null,businessContainerEls:null,fgSegs:null,bgSegs:null,helperSegs:null,highlightSegs:null,businessSegs:null,renderContentSkeleton:function(){var n,i,t="";for(n=0;n<this.colCnt;n++)t+='<td><div class="fc-content-col"><div class="fc-event-container fc-helper-container"></div><div class="fc-event-container"></div><div class="fc-highlight-container"></div><div class="fc-bgevent-container"></div><div class="fc-business-container"></div></div></td>';i=e('<div class="fc-content-skeleton"><table><tr>'+t+"</tr></table></div>"),this.colContainerEls=i.find(".fc-content-col"),this.helperContainerEls=i.find(".fc-helper-container"),this.fgContainerEls=i.find(".fc-event-container:not(.fc-helper-container)"),this.bgContainerEls=i.find(".fc-bgevent-container"),this.highlightContainerEls=i.find(".fc-highlight-container"),this.businessContainerEls=i.find(".fc-business-container"),this.bookendCells(i.find("tr")),this.el.append(i)},renderFgSegs:function(e){return e=this.renderFgSegsIntoContainers(e,this.fgContainerEls),this.fgSegs=e,e},unrenderFgSegs:function(){this.unrenderNamedSegs("fgSegs")},renderHelperSegs:function(t,n){var r,s,a,i=[];for(t=this.renderFgSegsIntoContainers(t,this.helperContainerEls),r=0;r<t.length;r++)s=t[r],n&&n.col===s.col&&(a=n.el,s.el.css({left:a.css("left"),right:a.css("right"),"margin-left":a.css("margin-left"),"margin-right":a.css("margin-right")})),i.push(s.el[0]);return this.helperSegs=t,e(i)},unrenderHelperSegs:function(){this.unrenderNamedSegs("helperSegs")},renderBgSegs:function(e){return e=this.renderFillSegEls("bgEvent",e),this.updateSegVerticals(e),this.attachSegsByCol(this.groupSegsByCol(e),this.bgContainerEls),this.bgSegs=e,e},unrenderBgSegs:function(){this.unrenderNamedSegs("bgSegs")},renderHighlightSegs:function(e){e=this.renderFillSegEls("highlight",e),this.updateSegVerticals(e),this.attachSegsByCol(this.groupSegsByCol(e),this.highlightContainerEls),this.highlightSegs=e},unrenderHighlightSegs:function(){this.unrenderNamedSegs("highlightSegs")},renderBusinessSegs:function(e){e=this.renderFillSegEls("businessHours",e),this.updateSegVerticals(e),this.attachSegsByCol(this.groupSegsByCol(e),this.businessContainerEls),this.businessSegs=e},unrenderBusinessSegs:function(){this.unrenderNamedSegs("businessSegs")},groupSegsByCol:function(e){var n,t=[];for(n=0;n<this.colCnt;n++)t.push([]);for(n=0;n<e.length;n++)t[e[n].col].push(e[n]);return t},attachSegsByCol:function(e,t){var n,i,r;for(n=0;n<this.colCnt;n++)for(i=e[n],r=0;r<i.length;r++)t.eq(n).append(i[r].el)},unrenderNamedSegs:function(e){var n,t=this[e];if(t){for(n=0;n<t.length;n++)t[n].el.remove();this[e]=null}},renderFgSegsIntoContainers:function(e,t){var n,i;for(e=this.renderFgSegEls(e),n=this.groupSegsByCol(e),i=0;i<this.colCnt;i++)this.updateFgSegCoords(n[i]);return this.attachSegsByCol(n,t),e},fgSegHtml:function(e,t){var u,h,c,n=this.view,i=e.event,r=n.isEventDraggable(i),s=!t&&e.isStart&&n.isEventResizableFromStart(i),a=!t&&e.isEnd&&n.isEventResizableFromEnd(i),o=this.getSegClasses(e,r,s||a),l=we(this.getSegSkinCss(e));return o.unshift("fc-time-grid-event","fc-v-event"),n.isMultiDayEvent(i)?(e.isStart||e.isEnd)&&(u=this.getEventTimeText(e),h=this.getEventTimeText(e,"LT"),c=this.getEventTimeText(e,null,!1)):(u=this.getEventTimeText(i),h=this.getEventTimeText(i,"LT"),c=this.getEventTimeText(i,null,!1)),'<a class="'+o.join(" ")+'"'+(i.url?' href="'+me(i.url)+'"':"")+(l?' style="'+l+'"':"")+'><div class="fc-content">'+(u?'<div class="fc-time" data-start="'+me(c)+'" data-full="'+me(h)+'"><span>'+me(u)+"</span></div>":"")+(i.title?'<div class="fc-title">'+me(i.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(a?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},updateSegVerticals:function(e){this.computeSegVerticals(e),this.assignSegVerticals(e)},computeSegVerticals:function(e){var t,n,i;for(t=0;t<e.length;t++)n=e[t],i=this.dayDates[n.dayIndex],n.top=this.computeDateTop(n.start,i),n.bottom=this.computeDateTop(n.end,i)},assignSegVerticals:function(e){var t,n;for(t=0;t<e.length;t++)n=e[t],n.el.css(this.generateSegVerticalCss(n))},generateSegVerticalCss:function(e){return{top:e.top,bottom:-e.bottom}},updateFgSegCoords:function(e){this.computeSegVerticals(e),this.computeFgSegHorizontals(e),this.assignSegVerticals(e),this.assignFgSegHorizontals(e)},computeFgSegHorizontals:function(e){var t,n,i;if(this.sortEventSegs(e),t=vt(e),gt(t),n=t[0]){for(i=0;i<n.length;i++)pt(n[i]);for(i=0;i<n.length;i++)this.computeFgSegForwardBack(n[i],0,0)}},computeFgSegForwardBack:function(e,t,n){var r,i=e.forwardSegs;if(void 0===e.forwardCoord)for(i.length?(this.sortForwardSegs(i),this.computeFgSegForwardBack(i[0],t+1,n),e.forwardCoord=i[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-n)/(t+1),r=0;r<i.length;r++)this.computeFgSegForwardBack(i[r],0,e.forwardCoord)},sortForwardSegs:function(e){e.sort(Te(this,"compareForwardSegs"))},compareForwardSegs:function(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||this.compareEventSegs(e,t)},assignFgSegHorizontals:function(e){var t,n;for(t=0;t<e.length;t++)n=e[t],n.el.css(this.generateFgSegHorizontalCss(n)),n.bottom-n.top<30&&n.el.addClass("fc-short")},generateFgSegHorizontalCss:function(e){var s,a,t=this.view.opt("slotEventOverlap"),n=e.backwardCoord,i=e.forwardCoord,r=this.generateSegVerticalCss(e);return t&&(i=Math.min(1,n+2*(i-n))),this.isRTL?(s=1-i,a=n):(s=n,a=1-i),r.zIndex=e.level+1,r.left=100*s+"%",r.right=100*a+"%",t&&e.forwardPressure&&(r[this.isRTL?"marginLeft":"marginRight"]=20),r}});var wt=n.View=Ge.extend({type:null,name:null,title:null,calendar:null,viewSpec:null,options:null,el:null,renderQueue:null,batchRenderDepth:0,isDatesRendered:!1,isEventsRendered:!1,isBaseRendered:!1,queuedScroll:null,isRTL:!1,isSelected:!1,selectedEvent:null,eventOrderSpecs:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,isNowIndicatorRendered:null,initialNowDate:null,initialNowQueriedMs:null,nowIndicatorTimeoutID:null,nowIndicatorIntervalID:null,constructor:function(e,n){Ge.prototype.constructor.call(this),this.calendar=e,this.viewSpec=n,this.type=n.type,this.options=n.options,this.name=this.type,this.nextDayThreshold=t.duration(this.opt("nextDayThreshold")),this.initThemingProps(),this.initHiddenDays(),this.isRTL=this.opt("isRTL"),this.eventOrderSpecs=z(this.opt("eventOrder")),this.renderQueue=this.buildRenderQueue(),this.initAutoBatchRender(),this.initialize()},buildRenderQueue:function(){var e=this,t=new Ye({event:this.opt("eventRenderWait")});return t.on("start",function(){e.freezeHeight(),e.addScroll(e.queryScroll())}),t.on("stop",function(){e.thawHeight(),e.popScroll()}),t},initAutoBatchRender:function(){var e=this;this.on("before:change",function(){e.startBatchRender()}),this.on("change",function(){e.stopBatchRender()})},startBatchRender:function(){this.batchRenderDepth++||this.renderQueue.pause()},stopBatchRender:function(){--this.batchRenderDepth||this.renderQueue.resume()},initialize:function(){},opt:function(e){return this.options[e]},publiclyTrigger:function(e,t){var n=this.calendar;return n.publiclyTrigger.apply(n,[e,t||this].concat(Array.prototype.slice.call(arguments,2),[this]))},updateTitle:function(){this.title=this.computeTitle(),this.calendar.setToolbarsTitle(this.title)},computeTitle:function(){var e;return e=/^(year|month)$/.test(this.currentRangeUnit)?this.currentRange:this.activeRange,this.formatRange({start:this.calendar.applyTimezone(e.start),end:this.calendar.applyTimezone(e.end)},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){return"year"==this.currentRangeUnit?"YYYY":"month"==this.currentRangeUnit?this.opt("monthYearFormat"):this.currentRangeAs("days")>1?"ll":"LL"},formatRange:function(e,t,n){var i=e.end;return i.hasTime()||(i=i.clone().subtract(1)),Ne(e.start,i,t,n,this.opt("isRTL"))},getAllDayHtml:function(){return this.opt("allDayHtml")||me(this.opt("allDayText"))},buildGotoAnchorHtml:function(t,i,r){var s,a,o,l;return e.isPlainObject(t)?(s=t.date,a=t.type,o=t.forceOff):s=t,s=n.moment(s),l={date:s.format("YYYY-MM-DD"),type:a||"day"},"string"==typeof i&&(r=i,i=null),i=i?" "+Se(i):"",r=r||"",!o&&this.opt("navLinks")?"<a"+i+' data-goto="'+me(JSON.stringify(l))+'">'+r+"</a>":"<span"+i+">"+r+"</span>"},setElement:function(e){this.el=e,this.bindGlobalHandlers(),this.bindBaseRenderHandlers(),this.renderSkeleton()},removeElement:function(){this.unsetDate(),
this.unrenderSkeleton(),this.unbindGlobalHandlers(),this.unbindBaseRenderHandlers(),this.el.remove()},renderSkeleton:function(){},unrenderSkeleton:function(){},setDate:function(e){var t=this.get("dateProfile"),n=this.buildDateProfile(e,null,!0);return t&&ie(t.activeRange,n.activeRange)||this.set("dateProfile",n),n.date},unsetDate:function(){this.unset("dateProfile")},requestDateRender:function(e){var t=this;this.renderQueue.queue(function(){t.executeDateRender(e)},"date","init")},requestDateUnrender:function(){var e=this;this.renderQueue.queue(function(){e.executeDateUnrender()},"date","destroy")},fetchInitialEvents:function(e){return this.calendar.requestEvents(e.activeRange.start,e.activeRange.end)},bindEventChanges:function(){this.listenTo(this.calendar,"eventsReset",this.resetEvents)},unbindEventChanges:function(){this.stopListeningTo(this.calendar,"eventsReset")},setEvents:function(e){this.set("currentEvents",e),this.set("hasEvents",!0)},unsetEvents:function(){this.unset("currentEvents"),this.unset("hasEvents")},resetEvents:function(e){this.startBatchRender(),this.unsetEvents(),this.setEvents(e),this.stopBatchRender()},requestEventsRender:function(e){var t=this;this.renderQueue.queue(function(){t.executeEventsRender(e)},"event","init")},requestEventsUnrender:function(){var e=this;this.renderQueue.queue(function(){e.executeEventsUnrender()},"event","destroy")},executeDateRender:function(e,t){this.setDateProfileForRendering(e),this.updateTitle(),this.calendar.updateToolbarButtons(),this.render&&this.render(),this.renderDates(),this.updateSize(),this.renderBusinessHours(),this.startNowIndicator(),t||this.addScroll(this.computeInitialDateScroll()),this.isDatesRendered=!0,this.trigger("datesRendered")},executeDateUnrender:function(){this.unselect(),this.stopNowIndicator(),this.trigger("before:datesUnrendered"),this.unrenderBusinessHours(),this.unrenderDates(),this.destroy&&this.destroy(),this.isDatesRendered=!1},renderDates:function(){},unrenderDates:function(){},bindBaseRenderHandlers:function(){var e=this;this.on("datesRendered.baseHandler",function(){e.onBaseRender()}),this.on("before:datesUnrendered.baseHandler",function(){e.onBeforeBaseUnrender()})},unbindBaseRenderHandlers:function(){this.off(".baseHandler")},onBaseRender:function(){this.applyScreenState(),this.publiclyTrigger("viewRender",this,this,this.el)},onBeforeBaseUnrender:function(){this.applyScreenState(),this.publiclyTrigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){this.listenTo(Je.get(),{touchstart:this.processUnselect,mousedown:this.handleDocumentMousedown})},unbindGlobalHandlers:function(){this.stopListeningTo(Je.get())},initThemingProps:function(){var e=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=e+"-widget-header",this.widgetContentClass=e+"-widget-content",this.highlightStateClass=e+"-state-highlight"},renderBusinessHours:function(){},unrenderBusinessHours:function(){},startNowIndicator:function(){var n,i,r,e=this;this.opt("nowIndicator")&&(n=this.getNowIndicatorUnit(),n&&(i=Te(this,"updateNowIndicator"),this.initialNowDate=this.calendar.getNow(),this.initialNowQueriedMs=+new Date,this.renderNowIndicator(this.initialNowDate),this.isNowIndicatorRendered=!0,r=this.initialNowDate.clone().startOf(n).add(1,n)-this.initialNowDate,this.nowIndicatorTimeoutID=setTimeout(function(){e.nowIndicatorTimeoutID=null,i(),r=+t.duration(1,n),r=Math.max(100,r),e.nowIndicatorIntervalID=setInterval(i,r)},r)))},updateNowIndicator:function(){this.isNowIndicatorRendered&&(this.unrenderNowIndicator(),this.renderNowIndicator(this.initialNowDate.clone().add(new Date-this.initialNowQueriedMs)))},stopNowIndicator:function(){this.isNowIndicatorRendered&&(this.nowIndicatorTimeoutID&&(clearTimeout(this.nowIndicatorTimeoutID),this.nowIndicatorTimeoutID=null),this.nowIndicatorIntervalID&&(clearTimeout(this.nowIndicatorIntervalID),this.nowIndicatorIntervalID=null),this.unrenderNowIndicator(),this.isNowIndicatorRendered=!1)},getNowIndicatorUnit:function(){},renderNowIndicator:function(e){},unrenderNowIndicator:function(){},updateSize:function(e){var t;e&&(t=this.queryScroll()),this.updateHeight(e),this.updateWidth(e),this.updateNowIndicator(),e&&this.applyScroll(t)},updateWidth:function(e){},updateHeight:function(e){var t=this.calendar;this.setHeight(t.getSuggestedViewHeight(),t.isHeightAuto())},setHeight:function(e,t){},addForcedScroll:function(t){this.addScroll(e.extend(t,{isForced:!0}))},addScroll:function(t){var n=this.queuedScroll||(this.queuedScroll={});n.isForced||e.extend(n,t)},popScroll:function(){this.applyQueuedScroll(),this.queuedScroll=null},applyQueuedScroll:function(){this.queuedScroll&&this.applyScroll(this.queuedScroll)},queryScroll:function(){var t={};return this.isDatesRendered&&e.extend(t,this.queryDateScroll()),t},applyScroll:function(e){this.isDatesRendered&&this.applyDateScroll(e)},computeInitialDateScroll:function(){return{}},queryDateScroll:function(){return{}},applyDateScroll:function(e){},freezeHeight:function(){this.calendar.freezeContentHeight()},thawHeight:function(){this.calendar.thawContentHeight()},executeEventsRender:function(e){this.renderEvents(e),this.isEventsRendered=!0,this.onEventsRender()},executeEventsUnrender:function(){this.onBeforeEventsUnrender(),this.destroyEvents&&this.destroyEvents(),this.unrenderEvents(),this.isEventsRendered=!1},onEventsRender:function(){this.applyScreenState(),this.renderedEventSegEach(function(e){this.publiclyTrigger("eventAfterRender",e.event,e.event,e.el)}),this.publiclyTrigger("eventAfterAllRender")},onBeforeEventsUnrender:function(){this.applyScreenState(),this.renderedEventSegEach(function(e){this.publiclyTrigger("eventDestroy",e.event,e.event,e.el)})},applyScreenState:function(){this.thawHeight(),this.freezeHeight(),this.applyQueuedScroll()},renderEvents:function(e){},unrenderEvents:function(){},resolveEventEl:function(t,n){var i=this.publiclyTrigger("eventRender",t,t,n);return i===!1?n=null:i&&i!==!0&&(n=e(i)),n},showEvent:function(e){this.renderedEventSegEach(function(e){e.el.css("visibility","")},e)},hideEvent:function(e){this.renderedEventSegEach(function(e){e.el.css("visibility","hidden")},e)},renderedEventSegEach:function(e,t){var i,n=this.getEventSegs();for(i=0;i<n.length;i++)t&&n[i].event._id!==t._id||n[i].el&&e.call(this,n[i])},getEventSegs:function(){return[]},isEventDraggable:function(e){return this.isEventStartEditable(e)},isEventStartEditable:function(e){return pe(e.startEditable,(e.source||{}).startEditable,this.opt("eventStartEditable"),this.isEventGenerallyEditable(e))},isEventGenerallyEditable:function(e){return pe(e.editable,(e.source||{}).editable,this.opt("editable"))},reportSegDrop:function(e,t,n,i,r){var s=this.calendar,a=s.mutateSeg(e,t,n),o=function(){a.undo(),s.reportEventChange()};this.triggerEventDrop(e.event,a.dateDelta,o,i,r),s.reportEventChange()},triggerEventDrop:function(e,t,n,i,r){this.publiclyTrigger("eventDrop",i[0],e,t,n,r,{})},reportExternalDrop:function(t,n,i,r,s){var o,l,a=t.eventProps;a&&(o=e.extend({},a,n),l=this.calendar.renderEvent(o,t.stick)[0]),this.triggerExternalDrop(l,n,i,r,s)},triggerExternalDrop:function(e,t,n,i,r){this.publiclyTrigger("drop",n[0],t.start,i,r),e&&this.publiclyTrigger("eventReceive",null,e)},renderDrag:function(e,t){},unrenderDrag:function(){},isEventResizableFromStart:function(e){return this.opt("eventResizableFromStart")&&this.isEventResizable(e)},isEventResizableFromEnd:function(e){return this.isEventResizable(e)},isEventResizable:function(e){var t=e.source||{};return pe(e.durationEditable,t.durationEditable,this.opt("eventDurationEditable"),e.editable,t.editable,this.opt("editable"))},reportSegResize:function(e,t,n,i,r){var s=this.calendar,a=s.mutateSeg(e,t,n),o=function(){a.undo(),s.reportEventChange()};this.triggerEventResize(e.event,a.durationDelta,o,i,r),s.reportEventChange()},triggerEventResize:function(e,t,n,i,r){this.publiclyTrigger("eventResize",i[0],e,t,n,r,{})},select:function(e,t){this.unselect(t),this.renderSelection(e),this.reportSelection(e,t)},renderSelection:function(e){},reportSelection:function(e,t){this.isSelected=!0,this.triggerSelect(e,t)},triggerSelect:function(e,t){this.publiclyTrigger("select",null,this.calendar.applyTimezone(e.start),this.calendar.applyTimezone(e.end),t)},unselect:function(e){this.isSelected&&(this.isSelected=!1,this.destroySelection&&this.destroySelection(),this.unrenderSelection(),this.publiclyTrigger("unselect",null,e))},unrenderSelection:function(){},selectEvent:function(e){this.selectedEvent&&this.selectedEvent===e||(this.unselectEvent(),this.renderedEventSegEach(function(e){e.el.addClass("fc-selected")},e),this.selectedEvent=e)},unselectEvent:function(){this.selectedEvent&&(this.renderedEventSegEach(function(e){e.el.removeClass("fc-selected")},this.selectedEvent),this.selectedEvent=null)},isEventSelected:function(e){return this.selectedEvent&&this.selectedEvent._id===e._id},handleDocumentMousedown:function(e){T(e)&&this.processUnselect(e)},processUnselect:function(e){this.processRangeUnselect(e),this.processEventUnselect(e)},processRangeUnselect:function(t){var n;this.isSelected&&this.opt("unselectAuto")&&(n=this.opt("unselectCancel"),n&&e(t.target).closest(n).length||this.unselect(t))},processEventUnselect:function(t){this.selectedEvent&&(e(t.target).closest(".fc-selected").length||this.unselectEvent())},triggerDayClick:function(e,t,n){this.publiclyTrigger("dayClick",t,this.calendar.applyTimezone(e.start),n)},computeDayRange:function(e){var r,t=e.start.clone().stripTime(),n=e.end,i=null;return n&&(i=n.clone().stripTime(),r=+n.time(),r&&r>=this.nextDayThreshold&&i.add(1,"days")),(!n||t>=i)&&(i=t.clone().add(1,"days")),{start:t,end:i}},isMultiDayEvent:function(e){var t=this.computeDayRange(e);return t.end.diff(t.start,"days")>1}});wt.watch("displayingDates",["dateProfile"],function(e){this.requestDateRender(e.dateProfile)},function(){this.requestDateUnrender()}),wt.watch("initialEvents",["dateProfile"],function(e){return this.fetchInitialEvents(e.dateProfile)}),wt.watch("bindingEvents",["initialEvents"],function(e){this.setEvents(e.initialEvents),this.bindEventChanges()},function(){this.unbindEventChanges(),this.unsetEvents()}),wt.watch("displayingEvents",["displayingDates","hasEvents"],function(){this.requestEventsRender(this.get("currentEvents"))},function(){this.requestEventsUnrender()}),wt.mixin({currentRange:null,currentRangeUnit:null,renderRange:null,activeRange:null,validRange:null,dateIncrement:null,minTime:null,maxTime:null,usesMinMaxTime:!1,start:null,end:null,intervalStart:null,intervalEnd:null,setDateProfileForRendering:function(e){this.currentRange=e.currentRange,this.currentRangeUnit=e.currentRangeUnit,this.renderRange=e.renderRange,this.activeRange=e.activeRange,this.validRange=e.validRange,this.dateIncrement=e.dateIncrement,this.minTime=e.minTime,this.maxTime=e.maxTime,this.start=e.activeRange.start,this.end=e.activeRange.end,this.intervalStart=e.currentRange.start,this.intervalEnd=e.currentRange.end},buildPrevDateProfile:function(e){var t=e.clone().startOf(this.currentRangeUnit).subtract(this.dateIncrement);return this.buildDateProfile(t,-1)},buildNextDateProfile:function(e){var t=e.clone().startOf(this.currentRangeUnit).add(this.dateIncrement);return this.buildDateProfile(t,1)},buildDateProfile:function(e,n,i){var o,l,u,h,r=this.buildValidRange(),s=null,a=null;return i&&(e=J(e,r)),o=this.buildCurrentRangeInfo(e,n),l=this.buildRenderRange(o.range,o.unit),u=X(l),this.opt("showNonCurrentDates")||(u=K(u,o.range)),s=t.duration(this.opt("minTime")),a=t.duration(this.opt("maxTime")),this.adjustActiveRange(u,s,a),u=K(u,r),e=J(e,u),h=te(o.range,r),{validRange:r,currentRange:o.range,currentRangeUnit:o.unit,activeRange:u,renderRange:l,minTime:s,maxTime:a,isValid:h,date:e,dateIncrement:this.buildDateIncrement(o.duration)}},buildValidRange:function(){return this.getRangeOption("validRange",this.calendar.getNow())||{}},buildCurrentRangeInfo:function(e,t){var s,n=null,i=null,r=null;return this.viewSpec.duration?(n=this.viewSpec.duration,i=this.viewSpec.durationUnit,r=this.buildRangeFromDuration(e,t,n,i)):(s=this.opt("dayCount"))?(i="day",r=this.buildRangeFromDayCount(e,t,s)):(r=this.buildCustomVisibleRange(e))?i=q(r.start,r.end):(n=this.getFallbackDuration(),i=q(n),r=this.buildRangeFromDuration(e,t,n,i)),this.normalizeCurrentRange(r,i),{duration:n,unit:i,range:r}},getFallbackDuration:function(){return t.duration({days:1})},normalizeCurrentRange:function(e,t){/^(year|month|week|day)$/.test(t)?(e.start.stripTime(),e.end.stripTime()):(e.start.hasTime()||e.start.time(0),e.end.hasTime()||e.end.time(0))},adjustActiveRange:function(e,t,n){var i=!1;this.usesMinMaxTime&&(0>t&&(e.start.time(0).add(t),i=!0),n>864e5&&(e.end.time(n-864e5),i=!0),i&&(e.start.hasTime()||e.start.time(0),e.end.hasTime()||e.end.time(0)))},buildRangeFromDuration:function(e,n,i,r){var o,l,u,s=this.opt("dateAlignment"),a=e.clone();return i.as("days")<=1&&this.isHiddenDay(a)&&(a=this.skipHiddenDays(a,n),a.startOf("day")),s||(l=this.opt("dateIncrement"),l?(u=t.duration(l),s=i>u?U(u,l):r):s=r),a.startOf(s),o=a.clone().add(i),{start:a,end:o}},buildRangeFromDayCount:function(e,t,n){var a,i=this.opt("dateAlignment"),r=0,s=e.clone();i&&s.startOf(i),s.startOf("day"),s=this.skipHiddenDays(s,t),a=s.clone();do a.add(1,"day"),this.isHiddenDay(a)||r++;while(n>r);return{start:s,end:a}},buildCustomVisibleRange:function(e){var t=this.getRangeOption("visibleRange",this.calendar.moment(e));return!t||t.start&&t.end?t:null},buildRenderRange:function(e,t){return this.trimHiddenDays(e)},buildDateIncrement:function(e){var i,n=this.opt("dateIncrement");return n?t.duration(n):(i=this.opt("dateAlignment"))?t.duration(1,i):e?e:t.duration({days:1})},trimHiddenDays:function(e){return{start:this.skipHiddenDays(e.start),end:this.skipHiddenDays(e.end,-1,!0)}},currentRangeAs:function(e){var t=this.currentRange;return t.end.diff(t.start,e,!0)},getRangeOption:function(e){var t=this.opt(e);return"function"==typeof t&&(t=t.apply(null,Array.prototype.slice.call(arguments,1))),t?this.calendar.parseRange(t):void 0},initHiddenDays:function(){var r,t=this.opt("hiddenDays")||[],n=[],i=0;for(this.opt("weekends")===!1&&t.push(0,6),r=0;7>r;r++)(n[r]=-1!==e.inArray(r,t))||i++;if(!i)throw"invalid hiddenDays";this.isHiddenDayHash=n},isHiddenDay:function(e){return t.isMoment(e)&&(e=e.day()),this.isHiddenDayHash[e]},skipHiddenDays:function(e,t,n){var i=e.clone();for(t=t||1;this.isHiddenDayHash[(i.day()+(n?t:0)+7)%7];)i.add(t,"days");return i}});var St=n.Scroller=Fe.extend({el:null,scrollEl:null,overflowX:null,overflowY:null,constructor:function(e){e=e||{},this.overflowX=e.overflowX||e.overflow||"auto",this.overflowY=e.overflowY||e.overflow||"auto"},render:function(){this.el=this.renderEl(),this.applyOverflow()},renderEl:function(){return this.scrollEl=e('<div class="fc-scroller"></div>')},clear:function(){this.setHeight("auto"),this.applyOverflow()},destroy:function(){this.el.remove()},applyOverflow:function(){this.scrollEl.css({"overflow-x":this.overflowX,"overflow-y":this.overflowY})},lockOverflow:function(e){var t=this.overflowX,n=this.overflowY;e=e||this.getScrollbarWidths(),"auto"===t&&(t=e.top||e.bottom||this.scrollEl[0].scrollWidth-1>this.scrollEl[0].clientWidth?"scroll":"hidden"),"auto"===n&&(n=e.left||e.right||this.scrollEl[0].scrollHeight-1>this.scrollEl[0].clientHeight?"scroll":"hidden"),this.scrollEl.css({"overflow-x":t,"overflow-y":n})},setHeight:function(e){this.scrollEl.height(e)},getScrollTop:function(){return this.scrollEl.scrollTop()},setScrollTop:function(e){this.scrollEl.scrollTop(e)},getClientWidth:function(){return this.scrollEl[0].clientWidth},getClientHeight:function(){return this.scrollEl[0].clientHeight},getScrollbarWidths:function(){return y(this.scrollEl)}});bt.prototype.proxyCall=function(e){var t=Array.prototype.slice.call(arguments,1),n=[];return this.items.forEach(function(i){n.push(i[e].apply(i,t))}),n};var Dt=n.Calendar=Fe.extend(qe,{view:null,viewsByType:null,currentDate:null,loadingLevel:0,constructor:function(e,t){Je.needed(),this.el=e,this.viewsByType={},this.viewSpecCache={},this.initOptionsInternals(t),this.initMomentInternals(),this.initCurrentDate(),Bt.call(this),this.initialize()},initialize:function(){},getCalendar:function(){return this},getView:function(){return this.view},publiclyTrigger:function(e,t){var n=Array.prototype.slice.call(arguments,2),i=this.opt(e);return t=t||this.el[0],this.triggerWith(e,t,n),i?i.apply(t,n):void 0},instantiateView:function(e){var t=this.getViewSpec(e);return new t["class"](this,t)},isValidViewType:function(e){return Boolean(this.getViewSpec(e))},changeView:function(e,t){t&&(t.start&&t.end?this.recordOptionOverrides({visibleRange:t}):this.currentDate=this.moment(t).stripZone()),this.renderView(e)},zoomTo:function(e,t){var n;t=t||"day",n=this.getViewSpec(t)||this.getUnitViewSpec(t),this.currentDate=e.clone(),this.renderView(n?n.type:null)},initCurrentDate:function(){var e=this.opt("defaultDate");null!=e?this.currentDate=this.moment(e).stripZone():this.currentDate=this.getNow()},prev:function(){var e=this.view.buildPrevDateProfile(this.currentDate);e.isValid&&(this.currentDate=e.date,this.renderView())},next:function(){var e=this.view.buildNextDateProfile(this.currentDate);e.isValid&&(this.currentDate=e.date,this.renderView())},prevYear:function(){this.currentDate.add(-1,"years"),this.renderView()},nextYear:function(){this.currentDate.add(1,"years"),this.renderView()},today:function(){this.currentDate=this.getNow(),this.renderView()},gotoDate:function(e){this.currentDate=this.moment(e).stripZone(),this.renderView()},incrementDate:function(e){this.currentDate.add(t.duration(e)),this.renderView()},getDate:function(){return this.applyTimezone(this.currentDate)},pushLoading:function(){this.loadingLevel++||this.publiclyTrigger("loading",null,!0,this.view)},popLoading:function(){--this.loadingLevel||this.publiclyTrigger("loading",null,!1,this.view)},select:function(e,t){this.view.select(this.buildSelectSpan.apply(this,arguments))},unselect:function(){this.view&&this.view.unselect()},buildSelectSpan:function(e,t){var i,n=this.moment(e).stripZone();return i=t?this.moment(t).stripZone():n.hasTime()?n.clone().add(this.defaultTimedEventDuration):n.clone().add(this.defaultAllDayEventDuration),{start:n,end:i}},parseRange:function(e){var t=null,n=null;return e.start&&(t=this.moment(e.start).stripZone()),e.end&&(n=this.moment(e.end).stripZone()),t||n?t&&n&&n.isBefore(t)?null:{start:t,end:n}:null},rerenderEvents:function(){this.elementVisible()&&this.reportEventChange()}});Dt.mixin({dirDefaults:null,localeDefaults:null,overrides:null,dynamicOverrides:null,optionsModel:null,initOptionsInternals:function(t){this.overrides=e.extend({},t),this.dynamicOverrides={},this.optionsModel=new Ge,this.populateOptionsHash()},option:function(e,t){var n;if("string"==typeof e){if(void 0===t)return this.optionsModel.get(e);n={},n[e]=t,this.setOptions(n)}else"object"==typeof e&&this.setOptions(e)},opt:function(e){return this.optionsModel.get(e)},setOptions:function(e){var n,t=0;this.recordOptionOverrides(e);for(n in e)t++;if(1===t){if("height"===n||"contentHeight"===n||"aspectRatio"===n)return void this.updateSize(!0);if("defaultDate"===n)return;if("businessHours"===n)return void(this.view&&(this.view.unrenderBusinessHours(),this.view.renderBusinessHours()));if("timezone"===n)return this.rezoneArrayEventSources(),void this.refetchEvents()}this.renderHeader(),this.renderFooter(),this.viewsByType={},this.reinitView()},populateOptionsHash:function(){var e,t,n,i,r;e=pe(this.dynamicOverrides.locale,this.overrides.locale),t=Tt[e],t||(e=Dt.defaults.locale,t=Tt[e]||{}),n=pe(this.dynamicOverrides.isRTL,this.overrides.isRTL,t.isRTL,Dt.defaults.isRTL),i=n?Dt.rtlDefaults:{},this.dirDefaults=i,this.localeDefaults=t,r=s([Dt.defaults,i,t,this.overrides,this.dynamicOverrides]),xt(r),this.optionsModel.reset(r)},recordOptionOverrides:function(e){var t;for(t in e)this.dynamicOverrides[t]=e[t];this.viewSpecCache={},this.populateOptionsHash()}}),Dt.mixin({defaultAllDayEventDuration:null,defaultTimedEventDuration:null,localeData:null,initMomentInternals:function(){var e=this;this.defaultAllDayEventDuration=t.duration(this.opt("defaultAllDayEventDuration")),this.defaultTimedEventDuration=t.duration(this.opt("defaultTimedEventDuration")),this.optionsModel.watch("buildingMomentLocale",["?locale","?monthNames","?monthNamesShort","?dayNames","?dayNamesShort","?firstDay","?weekNumberCalculation"],function(t){var r,n=t.weekNumberCalculation,i=t.firstDay;"iso"===n&&(n="ISO");var s=ce(It(t.locale));t.monthNames&&(s._months=t.monthNames),t.monthNamesShort&&(s._monthsShort=t.monthNamesShort),t.dayNames&&(s._weekdays=t.dayNames),t.dayNamesShort&&(s._weekdaysShort=t.dayNamesShort),null==i&&"ISO"===n&&(i=1),null!=i&&(r=ce(s._week),r.dow=i,s._week=r),("ISO"===n||"local"===n||"function"==typeof n)&&(s._fullCalendar_weekCalc=n),e.localeData=s,e.currentDate&&e.localizeMoment(e.currentDate)})},moment:function(){var e;return"local"===this.opt("timezone")?(e=n.moment.apply(null,arguments),e.hasTime()&&e.local()):e="UTC"===this.opt("timezone")?n.moment.utc.apply(null,arguments):n.moment.parseZone.apply(null,arguments),this.localizeMoment(e),e},localizeMoment:function(e){e._locale=this.localeData},getIsAmbigTimezone:function(){return"local"!==this.opt("timezone")&&"UTC"!==this.opt("timezone")},applyTimezone:function(e){if(!e.hasTime())return e.clone();var i,t=this.moment(e.toArray()),n=e.time()-t.time();return n&&(i=t.clone().add(n),e.time()-i.time()===0&&(t=i)),t},getNow:function(){var e=this.opt("now");return"function"==typeof e&&(e=e()),this.moment(e).stripZone()},humanizeDuration:function(e){return e.locale(this.opt("locale")).humanize()},getEventEnd:function(e){return e.end?e.end.clone():this.getDefaultEventEnd(e.allDay,e.start)},getDefaultEventEnd:function(e,t){var n=t.clone();return e?n.stripTime().add(this.defaultAllDayEventDuration):n.add(this.defaultTimedEventDuration),this.getIsAmbigTimezone()&&n.stripZone(),n}}),Dt.mixin({viewSpecCache:null,getViewSpec:function(e){var t=this.viewSpecCache;return t[e]||(t[e]=this.buildViewSpec(e))},getUnitViewSpec:function(t){var i,r,s;if(-1!=e.inArray(t,P))for(i=this.header.getViewsWithButtons(),e.each(n.views,function(e){i.push(e)}),r=0;r<i.length;r++)if(s=this.getViewSpec(i[r]),s&&s.singleUnit==t)return s},buildViewSpec:function(e){for(var u,h,c,d,f,n=this.overrides.views||{},r=[],a=[],o=[],l=e;l;)u=i[l],h=n[l],l=null,"function"==typeof u&&(u={"class":u}),u&&(r.unshift(u),a.unshift(u.defaults||{}),c=c||u.duration,l=l||u.type),h&&(o.unshift(h),c=c||h.duration,l=l||h.type);return u=he(r),u.type=e,u["class"]?(c=c||this.dynamicOverrides.duration||this.overrides.duration,c&&(d=t.duration(c),d.valueOf()&&(f=U(d,c),u.duration=d,u.durationUnit=f,1===d.as(f)&&(u.singleUnit=f,o.unshift(n[f]||{})))),u.defaults=s(a),u.overrides=s(o),this.buildViewSpecOptions(u),this.buildViewSpecButtonText(u,e),u):!1},buildViewSpecOptions:function(e){e.options=s([Dt.defaults,e.defaults,this.dirDefaults,this.localeDefaults,this.overrides,e.overrides,this.dynamicOverrides]),xt(e.options)},buildViewSpecButtonText:function(e,t){function n(n){var i=n.buttonText||{};return i[t]||(e.buttonTextKey?i[e.buttonTextKey]:null)||(e.singleUnit?i[e.singleUnit]:null)}e.buttonTextOverride=n(this.dynamicOverrides)||n(this.overrides)||e.overrides.buttonText,e.buttonTextDefault=n(this.localeDefaults)||n(this.dirDefaults)||e.defaults.buttonText||n(Dt.defaults)||(e.duration?this.humanizeDuration(e.duration):null)||t}}),Dt.mixin({el:null,contentEl:null,suggestedViewHeight:null,windowResizeProxy:null,ignoreWindowResize:0,render:function(){this.contentEl?this.elementVisible()&&(this.calcSize(),this.renderView()):this.initialRender()},initialRender:function(){var t=this,n=this.el;n.addClass("fc"),n.on("click.fc","a[data-goto]",function(n){var i=e(this),r=i.data("goto"),s=t.moment(r.date),a=r.type,o=t.view.opt("navLink"+be(a)+"Click");"function"==typeof o?o(s,n):("string"==typeof o&&(a=o),t.zoomTo(s,a))}),this.optionsModel.watch("applyingThemeClasses",["?theme"],function(e){n.toggleClass("ui-widget",e.theme),n.toggleClass("fc-unthemed",!e.theme)}),this.optionsModel.watch("applyingDirClasses",["?isRTL","?locale"],function(e){n.toggleClass("fc-ltr",!e.isRTL),n.toggleClass("fc-rtl",e.isRTL)}),this.contentEl=e("<div class='fc-view-container'/>").prependTo(n),this.initToolbars(),this.renderHeader(),this.renderFooter(),this.renderView(this.opt("defaultView")),this.opt("handleWindowResize")&&e(window).resize(this.windowResizeProxy=Ce(this.windowResize.bind(this),this.opt("windowResizeDelay")))},destroy:function(){this.view&&this.view.removeElement(),this.toolbarsManager.proxyCall("removeElement"),this.contentEl.remove(),this.el.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),this.el.off(".fc"),this.windowResizeProxy&&(e(window).unbind("resize",this.windowResizeProxy),this.windowResizeProxy=null),Je.unneeded()},elementVisible:function(){return this.el.is(":visible")},renderView:function(t,n){this.ignoreWindowResize++;var i=this.view&&t&&this.view.type!==t;i&&(this.freezeContentHeight(),this.clearView()),!this.view&&t&&(this.view=this.viewsByType[t]||(this.viewsByType[t]=this.instantiateView(t)),this.view.setElement(e("<div class='fc-view fc-"+t+"-view' />").appendTo(this.contentEl)),this.toolbarsManager.proxyCall("activateButton",t)),this.view&&(n&&this.view.addForcedScroll(n),this.elementVisible()&&(this.currentDate=this.view.setDate(this.currentDate))),i&&this.thawContentHeight(),this.ignoreWindowResize--},clearView:function(){this.toolbarsManager.proxyCall("deactivateButton",this.view.type),this.view.removeElement(),this.view=null},reinitView:function(){this.ignoreWindowResize++,this.freezeContentHeight();var e=this.view.type,t=this.view.queryScroll();this.clearView(),this.calcSize(),this.renderView(e,t),this.thawContentHeight(),this.ignoreWindowResize--},getSuggestedViewHeight:function(){return null===this.suggestedViewHeight&&this.calcSize(),this.suggestedViewHeight},isHeightAuto:function(){return"auto"===this.opt("contentHeight")||"auto"===this.opt("height")},updateSize:function(e){return this.elementVisible()?(e&&this._calcSize(),this.ignoreWindowResize++,this.view.updateSize(!0),this.ignoreWindowResize--,!0):void 0},calcSize:function(){this.elementVisible()&&this._calcSize()},_calcSize:function(){var e=this.opt("contentHeight"),t=this.opt("height");"number"==typeof e?this.suggestedViewHeight=e:"function"==typeof e?this.suggestedViewHeight=e():"number"==typeof t?this.suggestedViewHeight=t-this.queryToolbarsHeight():"function"==typeof t?this.suggestedViewHeight=t()-this.queryToolbarsHeight():"parent"===t?this.suggestedViewHeight=this.el.parent().height()-this.queryToolbarsHeight():this.suggestedViewHeight=Math.round(this.contentEl.width()/Math.max(this.opt("aspectRatio"),.5))},windowResize:function(e){!this.ignoreWindowResize&&e.target===window&&this.view.renderRange&&this.updateSize(!0)&&this.view.publiclyTrigger("windowResize",this.el[0])},freezeContentHeight:function(){this.contentEl.css({width:"100%",height:this.contentEl.height(),overflow:"hidden"})},thawContentHeight:function(){this.contentEl.css({width:"",height:"",overflow:""})}}),Dt.mixin({header:null,footer:null,toolbarsManager:null,initToolbars:function(){this.header=new Et(this,this.computeHeaderOptions()),this.footer=new Et(this,this.computeFooterOptions()),this.toolbarsManager=new bt([this.header,this.footer])},computeHeaderOptions:function(){return{extraClasses:"fc-header-toolbar",layout:this.opt("header")}},computeFooterOptions:function(){return{extraClasses:"fc-footer-toolbar",layout:this.opt("footer")}},renderHeader:function(){var e=this.header;e.setToolbarOptions(this.computeHeaderOptions()),e.render(),e.el&&this.el.prepend(e.el)},renderFooter:function(){var e=this.footer;e.setToolbarOptions(this.computeFooterOptions()),e.render(),e.el&&this.el.append(e.el)},setToolbarsTitle:function(e){this.toolbarsManager.proxyCall("updateTitle",e)},updateToolbarButtons:function(){var e=this.getNow(),t=this.view,n=t.buildDateProfile(e),i=t.buildPrevDateProfile(this.currentDate),r=t.buildNextDateProfile(this.currentDate);this.toolbarsManager.proxyCall(n.isValid&&!ee(e,t.currentRange)?"enableButton":"disableButton","today"),this.toolbarsManager.proxyCall(i.isValid?"enableButton":"disableButton","prev"),this.toolbarsManager.proxyCall(r.isValid?"enableButton":"disableButton","next")},queryToolbarsHeight:function(){return this.toolbarsManager.items.reduce(function(e,t){var n=t.el?t.el.outerHeight(!0):0;return e+n},0)}}),Dt.defaults={titleRangeSeparator:" – ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",scrollTime:"06:00:00",minTime:"00:00:00",maxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},allDayText:"all-day",theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventOrder:"title",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3},Dt.englishDefaults={dayPopoverFormat:"dddd, MMMM D"},Dt.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var Tt=n.locales={};n.datepickerLocale=function(t,n,i){var r=Tt[t]||(Tt[t]={});r.isRTL=i.isRTL,r.weekNumberTitle=i.weekHeader,e.each(Ct,function(e,t){r[e]=t(i)}),e.datepicker&&(e.datepicker.regional[n]=e.datepicker.regional[t]=i,e.datepicker.regional.en=e.datepicker.regional[""],e.datepicker.setDefaults(i))},n.locale=function(t,n){var i,r;i=Tt[t]||(Tt[t]={}),n&&(i=Tt[t]=s([i,n])),r=It(t),e.each(Ht,function(e,t){null==i[e]&&(i[e]=t(r,i))}),Dt.defaults.locale=t};var Ct={buttonText:function(e){return{prev:ye(e.prevText),next:ye(e.nextText),today:ye(e.currentText)}},monthYearFormat:function(e){return e.showMonthAfterYear?"YYYY["+e.yearSuffix+"] MMMM":"MMMM YYYY["+e.yearSuffix+"]"}},Ht={dayOfMonthFormat:function(e,t){var n=e.longDateFormat("l");return n=n.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),t.isRTL?n+=" ddd":n="ddd "+n,n},mediumTimeFormat:function(e){return e.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(e){return e.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(e){return e.longDateFormat("LT").replace(/\s*a$/i,"")}},Rt={smallDayDateFormat:function(e){return e.isRTL?"D dd":"dd D"},weekFormat:function(e){return e.isRTL?"w[ "+e.weekNumberTitle+"]":"["+e.weekNumberTitle+" ]w"},smallWeekFormat:function(e){return e.isRTL?"w["+e.weekNumberTitle+"]":"["+e.weekNumberTitle+"]w"}};n.locale("en",Dt.englishDefaults),n.sourceNormalizers=[],n.sourceFetchers=[];var kt={dataType:"json",cache:!1},Mt=1;Dt.prototype.mutateSeg=function(e,t){return this.mutateEvent(e.event,t)},Dt.prototype.normalizeEvent=function(e){},
Dt.prototype.spanContainsSpan=function(e,t){var n=e.start.clone().stripZone(),i=this.getEventEnd(e).stripZone();return t.start>=n&&t.end<=i},Dt.prototype.getPeerEvents=function(e,t){var r,s,n=this.getEventCache(),i=[];for(r=0;r<n.length;r++)s=n[r],t&&t._id===s._id||i.push(s);return i},Dt.prototype.isEventSpanAllowed=function(e,t){var n=t.source||{},i=this.opt("eventAllow"),r=pe(t.constraint,n.constraint,this.opt("eventConstraint")),s=pe(t.overlap,n.overlap,this.opt("eventOverlap"));return this.isSpanAllowed(e,r,s,t)&&(!i||i(e,t)!==!1)},Dt.prototype.isExternalSpanAllowed=function(t,n,i){var r,s;return i&&(r=e.extend({},i,n),s=this.expandEvent(this.buildEventFromInput(r))[0]),s?this.isEventSpanAllowed(t,s):this.isSelectionSpanAllowed(t)},Dt.prototype.isSelectionSpanAllowed=function(e){var t=this.opt("selectAllow");return this.isSpanAllowed(e,this.opt("selectConstraint"),this.opt("selectOverlap"))&&(!t||t(e)!==!1)},Dt.prototype.isSpanAllowed=function(e,t,n,i){var r,s,a,o,l,u;if(null!=t&&(r=this.constraintToEvents(t))){for(s=!1,o=0;o<r.length;o++)if(this.spanContainsSpan(r[o],e)){s=!0;break}if(!s)return!1}for(a=this.getPeerEvents(e,i),o=0;o<a.length;o++)if(l=a[o],this.eventIntersectsRange(l,e)){if(n===!1)return!1;if("function"==typeof n&&!n(l,i))return!1;if(i){if(u=pe(l.overlap,(l.source||{}).overlap),u===!1)return!1;if("function"==typeof u&&!u(i,l))return!1}}return!0},Dt.prototype.constraintToEvents=function(e){return"businessHours"===e?this.getCurrentBusinessHourEvents():"object"==typeof e?null!=e.start?this.expandEvent(this.buildEventFromInput(e)):null:this.clientEvents(e)},Dt.prototype.eventIntersectsRange=function(e,t){var n=e.start.clone().stripZone(),i=this.getEventEnd(e).stripZone();return t.start<i&&t.end>n};var Nt={id:"_fcBusinessHours",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"};Dt.prototype.getCurrentBusinessHourEvents=function(e){return this.computeBusinessHourEvents(e,this.opt("businessHours"))},Dt.prototype.computeBusinessHourEvents=function(t,n){return n===!0?this.expandBusinessHourEvents(t,[{}]):e.isPlainObject(n)?this.expandBusinessHourEvents(t,[n]):e.isArray(n)?this.expandBusinessHourEvents(t,n,!0):[]},Dt.prototype.expandBusinessHourEvents=function(t,n,i){var a,o,r=this.getView(),s=[];for(a=0;a<n.length;a++)o=n[a],(!i||o.dow)&&(o=e.extend({},Nt,o),t&&(o.start=null,o.end=null),s.push.apply(s,this.expandEvent(this.buildEventFromInput(o),r.activeRange.start,r.activeRange.end)));return s};var zt=n.BasicView=wt.extend({scroller:null,dayGridClass:ht,dayGrid:null,dayNumbersVisible:!1,colWeekNumbersVisible:!1,cellWeekNumbersVisible:!1,weekNumberWidth:null,headContainerEl:null,headRowEl:null,initialize:function(){this.dayGrid=this.instantiateDayGrid(),this.scroller=new St({overflowX:"hidden",overflowY:"auto"})},instantiateDayGrid:function(){var e=this.dayGridClass.extend(Ft);return new e(this)},buildRenderRange:function(e,t){var n=wt.prototype.buildRenderRange.apply(this,arguments);return/^(year|month)$/.test(t)&&(n.start.startOf("week"),n.end.weekday()&&n.end.add(1,"week").startOf("week")),this.trimHiddenDays(n)},renderDates:function(){this.dayGrid.breakOnWeeks=/year|month|week/.test(this.currentRangeUnit),this.dayGrid.setRange(this.renderRange),this.dayNumbersVisible=this.dayGrid.rowCnt>1,this.opt("weekNumbers")&&(this.opt("weekNumbersWithinDays")?(this.cellWeekNumbersVisible=!0,this.colWeekNumbersVisible=!1):(this.cellWeekNumbersVisible=!1,this.colWeekNumbersVisible=!0)),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.cellWeekNumbersVisible||this.colWeekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderSkeletonHtml()),this.renderHead(),this.scroller.render();var t=this.scroller.el.addClass("fc-day-grid-container"),n=e('<div class="fc-day-grid" />').appendTo(t);this.el.find(".fc-body > tr > td").append(t),this.dayGrid.setElement(n),this.dayGrid.renderDates(this.hasRigidRows())},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.dayGrid.renderHeadHtml()),this.headRowEl=this.headContainerEl.find(".fc-row")},unrenderDates:function(){this.dayGrid.unrenderDates(),this.dayGrid.removeElement(),this.scroller.destroy()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},unrenderBusinessHours:function(){this.dayGrid.unrenderBusinessHours()},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'"></td></tr></tbody></table>'},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var e=this.opt("eventLimit");return e&&"number"!=typeof e},updateWidth:function(){this.colWeekNumbersVisible&&(this.weekNumberWidth=d(this.el.find(".fc-week-number")))},setHeight:function(e,t){var i,r,n=this.opt("eventLimit");this.scroller.clear(),o(this.headRowEl),this.dayGrid.removeSegPopover(),n&&"number"==typeof n&&this.dayGrid.limitRows(n),i=this.computeScrollerHeight(e),this.setGridHeight(i,t),n&&"number"!=typeof n&&this.dayGrid.limitRows(n),t||(this.scroller.setHeight(i),r=this.scroller.getScrollbarWidths(),(r.left||r.right)&&(a(this.headRowEl,r),i=this.computeScrollerHeight(e),this.scroller.setHeight(i)),this.scroller.lockOverflow(r))},computeScrollerHeight:function(e){return e-f(this.el,this.scroller.el)},setGridHeight:function(e,t){t?c(this.dayGrid.rowEls):h(this.dayGrid.rowEls,e,!0)},computeInitialDateScroll:function(){return{top:0}},queryDateScroll:function(){return{top:this.scroller.getScrollTop()}},applyDateScroll:function(e){void 0!==e.top&&this.scroller.setScrollTop(e.top)},hitsNeeded:function(){this.dayGrid.hitsNeeded()},hitsNotNeeded:function(){this.dayGrid.hitsNotNeeded()},prepareHits:function(){this.dayGrid.prepareHits()},releaseHits:function(){this.dayGrid.releaseHits()},queryHit:function(e,t){return this.dayGrid.queryHit(e,t)},getHitSpan:function(e){return this.dayGrid.getHitSpan(e)},getHitEl:function(e){return this.dayGrid.getHitEl(e)},renderEvents:function(e){this.dayGrid.renderEvents(e),this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},unrenderEvents:function(){this.dayGrid.unrenderEvents()},renderDrag:function(e,t){return this.dayGrid.renderDrag(e,t)},unrenderDrag:function(){this.dayGrid.unrenderDrag()},renderSelection:function(e){this.dayGrid.renderSelection(e)},unrenderSelection:function(){this.dayGrid.unrenderSelection()}}),Ft={renderHeadIntroHtml:function(){var e=this.view;return e.colWeekNumbersVisible?'<th class="fc-week-number '+e.widgetHeaderClass+'" '+e.weekNumberStyleAttr()+"><span>"+me(e.opt("weekNumberTitle"))+"</span></th>":""},renderNumberIntroHtml:function(e){var t=this.view,n=this.getCellDate(e,0);return t.colWeekNumbersVisible?'<td class="fc-week-number" '+t.weekNumberStyleAttr()+">"+t.buildGotoAnchorHtml({date:n,type:"week",forceOff:1===this.colCnt},n.format("w"))+"</td>":""},renderBgIntroHtml:function(){var e=this.view;return e.colWeekNumbersVisible?'<td class="fc-week-number '+e.widgetContentClass+'" '+e.weekNumberStyleAttr()+"></td>":""},renderIntroHtml:function(){var e=this.view;return e.colWeekNumbersVisible?'<td class="fc-week-number" '+e.weekNumberStyleAttr()+"></td>":""}},At=n.MonthView=zt.extend({buildRenderRange:function(){var t,e=zt.prototype.buildRenderRange.apply(this,arguments);return this.isFixedWeeks()&&(t=Math.ceil(e.end.diff(e.start,"weeks",!0)),e.end.add(6-t,"weeks")),e},setGridHeight:function(e,t){t&&(e*=this.rowCnt/6),h(this.dayGrid.rowEls,e,!t)},isFixedWeeks:function(){return this.opt("fixedWeekCount")}});i.basic={"class":zt},i.basicDay={type:"basic",duration:{days:1}},i.basicWeek={type:"basic",duration:{weeks:1}},i.month={"class":At,duration:{months:1},defaults:{fixedWeekCount:!0}};var Vt=n.AgendaView=wt.extend({scroller:null,timeGridClass:ft,timeGrid:null,dayGridClass:ht,dayGrid:null,axisWidth:null,headContainerEl:null,noScrollRowEls:null,bottomRuleEl:null,usesMinMaxTime:!0,initialize:function(){this.timeGrid=this.instantiateTimeGrid(),this.opt("allDaySlot")&&(this.dayGrid=this.instantiateDayGrid()),this.scroller=new St({overflowX:"hidden",overflowY:"auto"})},instantiateTimeGrid:function(){var e=this.timeGridClass.extend(Gt);return new e(this)},instantiateDayGrid:function(){var e=this.dayGridClass.extend(Ot);return new e(this)},renderDates:function(){this.timeGrid.setRange(this.renderRange),this.dayGrid&&this.dayGrid.setRange(this.renderRange),this.el.addClass("fc-agenda-view").html(this.renderSkeletonHtml()),this.renderHead(),this.scroller.render();var t=this.scroller.el.addClass("fc-time-grid-container"),n=e('<div class="fc-time-grid" />').appendTo(t);this.el.find(".fc-body > tr > td").append(t),this.timeGrid.setElement(n),this.timeGrid.renderDates(),this.bottomRuleEl=e('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.timeGrid.renderHeadHtml())},unrenderDates:function(){this.timeGrid.unrenderDates(),this.timeGrid.removeElement(),this.dayGrid&&(this.dayGrid.unrenderDates(),this.dayGrid.removeElement()),this.scroller.destroy()},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+"</td></tr></tbody></table>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},renderBusinessHours:function(){this.timeGrid.renderBusinessHours(),this.dayGrid&&this.dayGrid.renderBusinessHours()},unrenderBusinessHours:function(){this.timeGrid.unrenderBusinessHours(),this.dayGrid&&this.dayGrid.unrenderBusinessHours()},getNowIndicatorUnit:function(){return this.timeGrid.getNowIndicatorUnit()},renderNowIndicator:function(e){this.timeGrid.renderNowIndicator(e)},unrenderNowIndicator:function(){this.timeGrid.unrenderNowIndicator()},updateSize:function(e){this.timeGrid.updateSize(e),wt.prototype.updateSize.call(this,e)},updateWidth:function(){this.axisWidth=d(this.el.find(".fc-axis"))},setHeight:function(e,t){var n,i,r;this.bottomRuleEl.hide(),this.scroller.clear(),o(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.removeSegPopover(),n=this.opt("eventLimit"),n&&"number"!=typeof n&&(n=Pt),n&&this.dayGrid.limitRows(n)),t||(i=this.computeScrollerHeight(e),this.scroller.setHeight(i),r=this.scroller.getScrollbarWidths(),(r.left||r.right)&&(a(this.noScrollRowEls,r),i=this.computeScrollerHeight(e),this.scroller.setHeight(i)),this.scroller.lockOverflow(r),this.timeGrid.getTotalSlatHeight()<i&&this.bottomRuleEl.show())},computeScrollerHeight:function(e){return e-f(this.el,this.scroller.el)},computeInitialDateScroll:function(){var e=t.duration(this.opt("scrollTime")),n=this.timeGrid.computeTimeTop(e);return n=Math.ceil(n),n&&n++,{top:n}},queryDateScroll:function(){return{top:this.scroller.getScrollTop()}},applyDateScroll:function(e){void 0!==e.top&&this.scroller.setScrollTop(e.top)},hitsNeeded:function(){this.timeGrid.hitsNeeded(),this.dayGrid&&this.dayGrid.hitsNeeded()},hitsNotNeeded:function(){this.timeGrid.hitsNotNeeded(),this.dayGrid&&this.dayGrid.hitsNotNeeded()},prepareHits:function(){this.timeGrid.prepareHits(),this.dayGrid&&this.dayGrid.prepareHits()},releaseHits:function(){this.timeGrid.releaseHits(),this.dayGrid&&this.dayGrid.releaseHits()},queryHit:function(e,t){var n=this.timeGrid.queryHit(e,t);return!n&&this.dayGrid&&(n=this.dayGrid.queryHit(e,t)),n},getHitSpan:function(e){return e.component.getHitSpan(e)},getHitEl:function(e){return e.component.getHitEl(e)},renderEvents:function(e){var r,s,t=[],n=[],i=[];for(s=0;s<e.length;s++)e[s].allDay?t.push(e[s]):n.push(e[s]);r=this.timeGrid.renderEvents(n),this.dayGrid&&(i=this.dayGrid.renderEvents(t)),this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},unrenderEvents:function(){this.timeGrid.unrenderEvents(),this.dayGrid&&this.dayGrid.unrenderEvents()},renderDrag:function(e,t){return e.start.hasTime()?this.timeGrid.renderDrag(e,t):this.dayGrid?this.dayGrid.renderDrag(e,t):void 0},unrenderDrag:function(){this.timeGrid.unrenderDrag(),this.dayGrid&&this.dayGrid.unrenderDrag()},renderSelection:function(e){e.start.hasTime()||e.end.hasTime()?this.timeGrid.renderSelection(e):this.dayGrid&&this.dayGrid.renderSelection(e)},unrenderSelection:function(){this.timeGrid.unrenderSelection(),this.dayGrid&&this.dayGrid.unrenderSelection()}}),Gt={renderHeadIntroHtml:function(){var t,e=this.view;return e.opt("weekNumbers")?(t=this.start.format(e.opt("smallWeekFormat")),'<th class="fc-axis fc-week-number '+e.widgetHeaderClass+'" '+e.axisStyleAttr()+">"+e.buildGotoAnchorHtml({date:this.start,type:"week",forceOff:this.colCnt>1},me(t))+"</th>"):'<th class="fc-axis '+e.widgetHeaderClass+'" '+e.axisStyleAttr()+"></th>"},renderBgIntroHtml:function(){var e=this.view;return'<td class="fc-axis '+e.widgetContentClass+'" '+e.axisStyleAttr()+"></td>"},renderIntroHtml:function(){var e=this.view;return'<td class="fc-axis" '+e.axisStyleAttr()+"></td>"}},Ot={renderBgIntroHtml:function(){var e=this.view;return'<td class="fc-axis '+e.widgetContentClass+'" '+e.axisStyleAttr()+"><span>"+e.getAllDayHtml()+"</span></td>"},renderIntroHtml:function(){var e=this.view;return'<td class="fc-axis" '+e.axisStyleAttr()+"></td>"}},Pt=5,_t=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];i.agenda={"class":Vt,defaults:{allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0}},i.agendaDay={type:"agenda",duration:{days:1}},i.agendaWeek={type:"agenda",duration:{weeks:1}};var Wt=wt.extend({grid:null,scroller:null,initialize:function(){this.grid=new Yt(this),this.scroller=new St({overflowX:"hidden",overflowY:"auto"})},renderSkeleton:function(){this.el.addClass("fc-list-view "+this.widgetContentClass),this.scroller.render(),this.scroller.el.appendTo(this.el),this.grid.setElement(this.scroller.scrollEl)},unrenderSkeleton:function(){this.scroller.destroy()},setHeight:function(e,t){this.scroller.setHeight(this.computeScrollerHeight(e))},computeScrollerHeight:function(e){return e-f(this.el,this.scroller.el)},renderDates:function(){this.grid.setRange(this.renderRange)},renderEvents:function(e){this.grid.renderEvents(e)},unrenderEvents:function(){this.grid.unrenderEvents()},isEventResizable:function(e){return!1},isEventDraggable:function(e){return!1}}),Yt=tt.extend({segSelector:".fc-list-item",hasDayInteractions:!1,spanToSegs:function(e){for(var r,t=this.view,n=t.renderRange.start.clone().time(0),i=0,s=[];n<t.renderRange.end;)if(r=G(e,{start:n,end:n.clone().add(1,"day")}),r&&(r.dayIndex=i,s.push(r)),n.add(1,"day"),i++,r&&!r.isEnd&&e.end.hasTime()&&e.end<n.clone().add(this.view.nextDayThreshold)){r.end=e.end.clone(),r.isEnd=!0;break}return s},computeEventTimeFormat:function(){return this.view.opt("mediumTimeFormat")},handleSegClick:function(t,n){var i;tt.prototype.handleSegClick.apply(this,arguments),e(n.target).closest("a[href]").length||(i=t.event.url,i&&!n.isDefaultPrevented()&&(window.location.href=i))},renderFgSegs:function(e){return e=this.renderFgSegEls(e),e.length?this.renderSegList(e):this.renderEmptyMessage(),e},renderEmptyMessage:function(){this.el.html('<div class="fc-list-empty-wrap2"><div class="fc-list-empty-wrap1"><div class="fc-list-empty">'+me(this.view.opt("noEventsMessage"))+"</div></div></div>")},renderSegList:function(t){var i,r,s,n=this.groupSegsByDay(t),a=e('<table class="fc-list-table"><tbody/></table>'),o=a.find("tbody");for(i=0;i<n.length;i++)if(r=n[i])for(o.append(this.dayHeaderHtml(this.view.renderRange.start.clone().add(i,"days"))),this.sortEventSegs(r),s=0;s<r.length;s++)o.append(r[s].el);this.el.empty().append(a)},groupSegsByDay:function(e){var n,i,t=[];for(n=0;n<e.length;n++)i=e[n],(t[i.dayIndex]||(t[i.dayIndex]=[])).push(i);return t},dayHeaderHtml:function(e){var t=this.view,n=t.opt("listDayFormat"),i=t.opt("listDayAltFormat");return'<tr class="fc-list-heading" data-date="'+e.format("YYYY-MM-DD")+'"><td class="'+t.widgetHeaderClass+'" colspan="3">'+(n?t.buildGotoAnchorHtml(e,{"class":"fc-list-heading-main"},me(e.format(n))):"")+(i?t.buildGotoAnchorHtml(e,{"class":"fc-list-heading-alt"},me(e.format(i))):"")+"</td></tr>"},fgSegHtml:function(e){var a,t=this.view,n=["fc-list-item"].concat(this.getSegCustomClasses(e)),i=this.getSegBackgroundColor(e),r=e.event,s=r.url;return a=r.allDay?t.getAllDayHtml():t.isMultiDayEvent(r)?e.isStart||e.isEnd?me(this.getEventTimeText(e)):t.getAllDayHtml():me(this.getEventTimeText(r)),s&&n.push("fc-has-url"),'<tr class="'+n.join(" ")+'">'+(this.displayEventTime?'<td class="fc-list-item-time '+t.widgetContentClass+'">'+(a||"")+"</td>":"")+'<td class="fc-list-item-marker '+t.widgetContentClass+'"><span class="fc-event-dot"'+(i?' style="background-color:'+i+'"':"")+'></span></td><td class="fc-list-item-title '+t.widgetContentClass+'"><a'+(s?' href="'+me(s)+'"':"")+">"+me(e.event.title||"")+'</a><br><input type="button" value="Attend" class="btn btn-success calendar-btns" state_id="1"><input type="button" value="Maybe" class="btn btn-info calendar-btns" state_id="2"><input type="button" value="Decline" class="btn btn-danger calendar-btns" state_id="3"></td></tr>'}});return i.list={"class":Wt,buttonTextKey:"list",defaults:{buttonText:"list",listDayFormat:"LL",noEventsMessage:"No events to display"}},i.listDay={type:"list",duration:{days:1},defaults:{listDayFormat:"dddd"}},i.listWeek={type:"list",duration:{weeks:1},defaults:{listDayFormat:"dddd",listDayAltFormat:"LL"}},i.listMonth={type:"list",duration:{month:1},defaults:{listDayAltFormat:"dddd"}},i.listYear={type:"list",duration:{year:1},defaults:{listDayAltFormat:"dddd"}},n});